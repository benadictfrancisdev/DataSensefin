import{g as Ee,r as l,as as Ce,at as gt,j as t,a as ge,b as et,c as tt,B as me,d as we,o as Je,au as kn,av as Rn,aw as $n,ax as Mn,f as pe,ay as An,v as Ze,x as It,T as Tt,al as En,az as In,L as at,u as $e,s as Tn,l as Ws,Z as as,S as xt,G as zn,H as Pn,J as Ye,M as Ds,C as pt,K as Qe,t as Ln,e as On,i as Fn,an as ks,F as qn,aA as Bn,A as Rs,Y as $s,D as Ms,I as Vn,R as Hn,V as Kn,W as Un,X as Gn,ai as Wn,y as Xn,ah as Yn}from"./index-CG6I4ibZ.js";import{C as Qn}from"./checkbox-8Rr_ayCm.js";import{S as Qt,a as _t,b as Jt,c as Zt,d as He}from"./select-BnHOLFni.js";import{a as is,M as _n,T as Ht,L as Jn,P as Zn,b as er,H as os,c as zt,C as tr,S as Xs,F as sr,D as nr}from"./PieChart-Ju6HBDVK.js";import{T as Pt}from"./trending-up-Dqe0U41A.js";import{g as rr,B as rt,X as Ge,Y as We,f as ar,R as Ke,C as _e,T as Ue,a as ir,L as or}from"./generateCategoricalChart-D2ZRUXeT.js";import{a as Ys,Z as lr,B as es,S as cr}from"./ScatterChart-ChSpn_1T.js";import{a as Qs,A as dr}from"./AreaChart-CF92B7rz.js";import{P as Lt}from"./progress-DcGcylKX.js";import{G as Ot}from"./grid-3x3-DS8h7Fvg.js";import{C as Mt}from"./circle-x-DFMCZO-o.js";import{C as _s}from"./calendar-DRGLsduc.js";import{R as Js}from"./refresh-cw-asTtkkCL.js";import{T as At}from"./target-BeagzYB1.js";import{C as ur}from"./chart-line-DVZvcpV3.js";import{T as hr}from"./trash-2-GddBIG4P.js";import{a as mr,R as fr,B as gr,G as xr}from"./rocket-Da6gawJD.js";import"./index-DXJAGtlO.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Ee("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Ee("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Ee("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Ee("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Ee("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ee("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Ee("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=Ee("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Ee("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Ee("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Ee("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var Cr=rr({chartName:"ComposedChart",GraphicalChild:[is,Qs,rt,Ys],axisComponents:[{axisType:"xAxis",AxisComp:Ge},{axisType:"yAxis",AxisComp:We},{axisType:"zAxis",AxisComp:lr}],formatAxisMap:ar});function Sr(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return l.useMemo(()=>r=>{s.forEach(a=>a(r))},s)}const Kt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ot(e){const s=Object.prototype.toString.call(e);return s==="[object Window]"||s==="[object global]"}function fs(e){return"nodeType"in e}function Se(e){var s,n;return e?ot(e)?e:fs(e)&&(s=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?s:window:window}function gs(e){const{Document:s}=Se(e);return e instanceof s}function Dt(e){return ot(e)?!1:e instanceof Se(e).HTMLElement}function en(e){return e instanceof Se(e).SVGElement}function lt(e){return e?ot(e)?e.document:fs(e)?gs(e)?e:Dt(e)||en(e)?e.ownerDocument:document:document:document}const Le=Kt?l.useLayoutEffect:l.useEffect;function xs(e){const s=l.useRef(e);return Le(()=>{s.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return s.current==null?void 0:s.current(...r)},[])}function Dr(){const e=l.useRef(null),s=l.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[s,n]}function wt(e,s){s===void 0&&(s=[e]);const n=l.useRef(e);return Le(()=>{n.current!==e&&(n.current=e)},s),n}function kt(e,s){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...s])}function Ft(e){const s=xs(e),n=l.useRef(null),r=l.useCallback(a=>{a!==n.current&&(s==null||s(a,n.current)),n.current=a},[]);return[n,r]}function cs(e){const s=l.useRef();return l.useEffect(()=>{s.current=e},[e]),s.current}let ts={};function Rt(e,s){return l.useMemo(()=>{if(s)return s;const n=ts[e]==null?0:ts[e]+1;return ts[e]=n,e+"-"+n},[e,s])}function tn(e){return function(s){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const c=Object.entries(o);for(const[f,x]of c){const v=i[f];v!=null&&(i[f]=v+e*x)}return i},{...s})}}const it=tn(1),Nt=tn(-1);function kr(e){return"clientX"in e&&"clientY"in e}function ps(e){if(!e)return!1;const{KeyboardEvent:s}=Se(e.target);return s&&e instanceof s}function Rr(e){if(!e)return!1;const{TouchEvent:s}=Se(e.target);return s&&e instanceof s}function ds(e){if(Rr(e)){if(e.touches&&e.touches.length){const{clientX:s,clientY:n}=e.touches[0];return{x:s,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:s,clientY:n}=e.changedTouches[0];return{x:s,y:n}}}return kr(e)?{x:e.clientX,y:e.clientY}:null}const Ct=Object.freeze({Translate:{toString(e){if(!e)return;const{x:s,y:n}=e;return"translate3d("+(s?Math.round(s):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:s,scaleY:n}=e;return"scaleX("+s+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ct.Translate.toString(e),Ct.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:s,duration:n,easing:r}=e;return s+" "+n+"ms "+r}}}),Is="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function $r(e){return e.matches(Is)?e:e.querySelector(Is)}const Mr={display:"none"};function Ar(e){let{id:s,value:n}=e;return Ce.createElement("div",{id:s,style:Mr},n)}function Er(e){let{id:s,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:s,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Ir(){const[e,s]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&s(r)},[]),announcement:e}}const sn=l.createContext(null);function Tr(e){const s=l.useContext(sn);l.useEffect(()=>{if(!s)throw new Error("useDndMonitor must be used within a children of <DndContext>");return s(e)},[e,s])}function zr(){const[e]=l.useState(()=>new Set),s=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[e]),s]}const Pr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Lr={onDragStart(e){let{active:s}=e;return"Picked up draggable item "+s.id+"."},onDragOver(e){let{active:s,over:n}=e;return n?"Draggable item "+s.id+" was moved over droppable area "+n.id+".":"Draggable item "+s.id+" is no longer over a droppable area."},onDragEnd(e){let{active:s,over:n}=e;return n?"Draggable item "+s.id+" was dropped over droppable area "+n.id:"Draggable item "+s.id+" was dropped."},onDragCancel(e){let{active:s}=e;return"Dragging was cancelled. Draggable item "+s.id+" was dropped."}};function Or(e){let{announcements:s=Lr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Pr}=e;const{announce:i,announcement:o}=Ir(),c=Rt("DndLiveRegion"),[f,x]=l.useState(!1);if(l.useEffect(()=>{x(!0)},[]),Tr(l.useMemo(()=>({onDragStart(u){let{active:N}=u;i(s.onDragStart({active:N}))},onDragMove(u){let{active:N,over:m}=u;s.onDragMove&&i(s.onDragMove({active:N,over:m}))},onDragOver(u){let{active:N,over:m}=u;i(s.onDragOver({active:N,over:m}))},onDragEnd(u){let{active:N,over:m}=u;i(s.onDragEnd({active:N,over:m}))},onDragCancel(u){let{active:N,over:m}=u;i(s.onDragCancel({active:N,over:m}))}}),[i,s])),!f)return null;const v=Ce.createElement(Ce.Fragment,null,Ce.createElement(Ar,{id:r,value:a.draggable}),Ce.createElement(Er,{id:c,announcement:o}));return n?gt.createPortal(v,n):v}var ve;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ve||(ve={}));function qt(){}function Ts(e,s){return l.useMemo(()=>({sensor:e,options:s??{}}),[e,s])}function Fr(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return l.useMemo(()=>[...s].filter(r=>r!=null),[...s])}const Te=Object.freeze({x:0,y:0});function nn(e,s){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function rn(e,s){let{data:{value:n}}=e,{data:{value:r}}=s;return n-r}function qr(e,s){let{data:{value:n}}=e,{data:{value:r}}=s;return r-n}function zs(e){let{left:s,top:n,height:r,width:a}=e;return[{x:s,y:n},{x:s+a,y:n},{x:s,y:n+r},{x:s+a,y:n+r}]}function an(e,s){if(!e||e.length===0)return null;const[n]=e;return n[s]}function Ps(e,s,n){return s===void 0&&(s=e.left),n===void 0&&(n=e.top),{x:s+e.width*.5,y:n+e.height*.5}}const Br=e=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=e;const a=Ps(s,s.left,s.top),i=[];for(const o of r){const{id:c}=o,f=n.get(c);if(f){const x=nn(Ps(f),a);i.push({id:c,data:{droppableContainer:o,value:x}})}}return i.sort(rn)},Vr=e=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=e;const a=zs(s),i=[];for(const o of r){const{id:c}=o,f=n.get(c);if(f){const x=zs(f),v=a.reduce((N,m,P)=>N+nn(x[P],m),0),u=Number((v/4).toFixed(4));i.push({id:c,data:{droppableContainer:o,value:u}})}}return i.sort(rn)};function Hr(e,s){const n=Math.max(s.top,e.top),r=Math.max(s.left,e.left),a=Math.min(s.left+s.width,e.left+e.width),i=Math.min(s.top+s.height,e.top+e.height),o=a-r,c=i-n;if(r<a&&n<i){const f=s.width*s.height,x=e.width*e.height,v=o*c,u=v/(f+x-v);return Number(u.toFixed(4))}return 0}const Kr=e=>{let{collisionRect:s,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,c=n.get(o);if(c){const f=Hr(c,s);f>0&&a.push({id:o,data:{droppableContainer:i,value:f}})}}return a.sort(qr)};function Ur(e,s,n){return{...e,scaleX:s&&n?s.width/n.width:1,scaleY:s&&n?s.height/n.height:1}}function on(e,s){return e&&s?{x:e.left-s.left,y:e.top-s.top}:Te}function Gr(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...n})}}const Wr=Gr(1);function Xr(e){if(e.startsWith("matrix3d(")){const s=e.slice(9,-1).split(/, /);return{x:+s[12],y:+s[13],scaleX:+s[0],scaleY:+s[5]}}else if(e.startsWith("matrix(")){const s=e.slice(7,-1).split(/, /);return{x:+s[4],y:+s[5],scaleX:+s[0],scaleY:+s[3]}}return null}function Yr(e,s,n){const r=Xr(s);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:c}=r,f=e.left-o-(1-a)*parseFloat(n),x=e.top-c-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),v=a?e.width/a:e.width,u=i?e.height/i:e.height;return{width:v,height:u,top:x,right:f+v,bottom:x+u,left:f}}const Qr={ignoreTransform:!1};function ct(e,s){s===void 0&&(s=Qr);let n=e.getBoundingClientRect();if(s.ignoreTransform){const{transform:x,transformOrigin:v}=Se(e).getComputedStyle(e);x&&(n=Yr(n,x,v))}const{top:r,left:a,width:i,height:o,bottom:c,right:f}=n;return{top:r,left:a,width:i,height:o,bottom:c,right:f}}function Ls(e){return ct(e,{ignoreTransform:!0})}function _r(e){const s=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:s,bottom:n,width:s,height:n}}function Jr(e,s){return s===void 0&&(s=Se(e).getComputedStyle(e)),s.position==="fixed"}function Zr(e,s){s===void 0&&(s=Se(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=s[a];return typeof i=="string"?n.test(i):!1})}function Ut(e,s){const n=[];function r(a){if(s!=null&&n.length>=s||!a)return n;if(gs(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Dt(a)||en(a)||n.includes(a))return n;const i=Se(e).getComputedStyle(a);return a!==e&&Zr(a,i)&&n.push(a),Jr(a,i)?n:r(a.parentNode)}return e?r(e):n}function ln(e){const[s]=Ut(e,1);return s??null}function ss(e){return!Kt||!e?null:ot(e)?e:fs(e)?gs(e)||e===lt(e).scrollingElement?window:Dt(e)?e:null:null}function cn(e){return ot(e)?e.scrollX:e.scrollLeft}function dn(e){return ot(e)?e.scrollY:e.scrollTop}function us(e){return{x:cn(e),y:dn(e)}}var ye;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ye||(ye={}));function un(e){return!Kt||!e?!1:e===document.scrollingElement}function hn(e){const s={x:0,y:0},n=un(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=s.y,i=e.scrollLeft<=s.x,o=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:r,minScroll:s}}const ea={x:.2,y:.2};function ta(e,s,n,r,a){let{top:i,left:o,right:c,bottom:f}=n;r===void 0&&(r=10),a===void 0&&(a=ea);const{isTop:x,isBottom:v,isLeft:u,isRight:N}=hn(e),m={x:0,y:0},P={x:0,y:0},O={height:s.height*a.y,width:s.width*a.x};return!x&&i<=s.top+O.height?(m.y=ye.Backward,P.y=r*Math.abs((s.top+O.height-i)/O.height)):!v&&f>=s.bottom-O.height&&(m.y=ye.Forward,P.y=r*Math.abs((s.bottom-O.height-f)/O.height)),!N&&c>=s.right-O.width?(m.x=ye.Forward,P.x=r*Math.abs((s.right-O.width-c)/O.width)):!u&&o<=s.left+O.width&&(m.x=ye.Backward,P.x=r*Math.abs((s.left+O.width-o)/O.width)),{direction:m,speed:P}}function sa(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:s,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:s,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function mn(e){return e.reduce((s,n)=>it(s,us(n)),Te)}function na(e){return e.reduce((s,n)=>s+cn(n),0)}function ra(e){return e.reduce((s,n)=>s+dn(n),0)}function aa(e,s){if(s===void 0&&(s=ct),!e)return;const{top:n,left:r,bottom:a,right:i}=s(e);ln(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ia=[["x",["left","right"],na],["y",["top","bottom"],ra]];class vs{constructor(s,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ut(n),a=mn(r);this.rect={...s},this.width=s.width,this.height=s.height;for(const[i,o,c]of ia)for(const f of o)Object.defineProperty(this,f,{get:()=>{const x=c(r),v=a[i]-x;return this.rect[f]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class yt{constructor(s){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=s}add(s,n,r){var a;(a=this.target)==null||a.addEventListener(s,n,r),this.listeners.push([s,n,r])}}function oa(e){const{EventTarget:s}=Se(e);return e instanceof s?e:lt(e)}function ns(e,s){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof s=="number"?Math.sqrt(n**2+r**2)>s:"x"in s&&"y"in s?n>s.x&&r>s.y:"x"in s?n>s.x:"y"in s?r>s.y:!1}var Ae;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ae||(Ae={}));function Os(e){e.preventDefault()}function la(e){e.stopPropagation()}var se;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(se||(se={}));const fn={start:[se.Space,se.Enter],cancel:[se.Esc],end:[se.Space,se.Enter,se.Tab]},ca=(e,s)=>{let{currentCoordinates:n}=s;switch(e.code){case se.Right:return{...n,x:n.x+25};case se.Left:return{...n,x:n.x-25};case se.Down:return{...n,y:n.y+25};case se.Up:return{...n,y:n.y-25}}};class ys{constructor(s){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=s;const{event:{target:n}}=s;this.props=s,this.listeners=new yt(lt(n)),this.windowListeners=new yt(Se(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ae.Resize,this.handleCancel),this.windowListeners.add(Ae.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ae.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:s,onStart:n}=this.props,r=s.node.current;r&&aa(r),n(Te)}handleKeyDown(s){if(ps(s)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=fn,coordinateGetter:o=ca,scrollBehavior:c="smooth"}=a,{code:f}=s;if(i.end.includes(f)){this.handleEnd(s);return}if(i.cancel.includes(f)){this.handleCancel(s);return}const{collisionRect:x}=r.current,v=x?{x:x.left,y:x.top}:Te;this.referenceCoordinates||(this.referenceCoordinates=v);const u=o(s,{active:n,context:r.current,currentCoordinates:v});if(u){const N=Nt(u,v),m={x:0,y:0},{scrollableAncestors:P}=r.current;for(const O of P){const j=s.code,{isTop:y,isRight:d,isLeft:w,isBottom:M,maxScroll:q,minScroll:V}=hn(O),H=sa(O),X={x:Math.min(j===se.Right?H.right-H.width/2:H.right,Math.max(j===se.Right?H.left:H.left+H.width/2,u.x)),y:Math.min(j===se.Down?H.bottom-H.height/2:H.bottom,Math.max(j===se.Down?H.top:H.top+H.height/2,u.y))},le=j===se.Right&&!d||j===se.Left&&!w,ne=j===se.Down&&!M||j===se.Up&&!y;if(le&&X.x!==u.x){const ae=O.scrollLeft+N.x,R=j===se.Right&&ae<=q.x||j===se.Left&&ae>=V.x;if(R&&!N.y){O.scrollTo({left:ae,behavior:c});return}R?m.x=O.scrollLeft-ae:m.x=j===se.Right?O.scrollLeft-q.x:O.scrollLeft-V.x,m.x&&O.scrollBy({left:-m.x,behavior:c});break}else if(ne&&X.y!==u.y){const ae=O.scrollTop+N.y,R=j===se.Down&&ae<=q.y||j===se.Up&&ae>=V.y;if(R&&!N.x){O.scrollTo({top:ae,behavior:c});return}R?m.y=O.scrollTop-ae:m.y=j===se.Down?O.scrollTop-q.y:O.scrollTop-V.y,m.y&&O.scrollBy({top:-m.y,behavior:c});break}}this.handleMove(s,it(Nt(u,this.referenceCoordinates),m))}}}handleMove(s,n){const{onMove:r}=this.props;s.preventDefault(),r(n)}handleEnd(s){const{onEnd:n}=this.props;s.preventDefault(),this.detach(),n()}handleCancel(s){const{onCancel:n}=this.props;s.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ys.activators=[{eventName:"onKeyDown",handler:(e,s,n)=>{let{keyboardCodes:r=fn,onActivation:a}=s,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Fs(e){return!!(e&&"distance"in e)}function qs(e){return!!(e&&"delay"in e)}class bs{constructor(s,n,r){var a;r===void 0&&(r=oa(s.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=s,this.events=n;const{event:i}=s,{target:o}=i;this.props=s,this.events=n,this.document=lt(o),this.documentListeners=new yt(this.document),this.listeners=new yt(r),this.windowListeners=new yt(Se(o)),this.initialCoordinates=(a=ds(i))!=null?a:Te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:s,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(s.move.name,this.handleMove,{passive:!1}),this.listeners.add(s.end.name,this.handleEnd),s.cancel&&this.listeners.add(s.cancel.name,this.handleCancel),this.windowListeners.add(Ae.Resize,this.handleCancel),this.windowListeners.add(Ae.DragStart,Os),this.windowListeners.add(Ae.VisibilityChange,this.handleCancel),this.windowListeners.add(Ae.ContextMenu,Os),this.documentListeners.add(Ae.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(qs(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Fs(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(s,n){const{active:r,onPending:a}=this.props;a(r,s,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:s}=this,{onStart:n}=this.props;s&&(this.activated=!0,this.documentListeners.add(Ae.Click,la,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ae.SelectionChange,this.removeTextSelection),n(s))}handleMove(s){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const f=(n=ds(s))!=null?n:Te,x=Nt(a,f);if(!r&&c){if(Fs(c)){if(c.tolerance!=null&&ns(x,c.tolerance))return this.handleCancel();if(ns(x,c.distance))return this.handleStart()}if(qs(c)&&ns(x,c.tolerance))return this.handleCancel();this.handlePending(c,x);return}s.cancelable&&s.preventDefault(),o(f)}handleEnd(){const{onAbort:s,onEnd:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleCancel(){const{onAbort:s,onCancel:n}=this.props;this.detach(),this.activated||s(this.props.active),n()}handleKeydown(s){s.code===se.Esc&&this.handleCancel()}removeTextSelection(){var s;(s=this.document.getSelection())==null||s.removeAllRanges()}}const da={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class js extends bs{constructor(s){const{event:n}=s,r=lt(n.target);super(s,da,r)}}js.activators=[{eventName:"onPointerDown",handler:(e,s)=>{let{nativeEvent:n}=e,{onActivation:r}=s;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const ua={move:{name:"mousemove"},end:{name:"mouseup"}};var hs;(function(e){e[e.RightClick=2]="RightClick"})(hs||(hs={}));class ha extends bs{constructor(s){super(s,ua,lt(s.event.target))}}ha.activators=[{eventName:"onMouseDown",handler:(e,s)=>{let{nativeEvent:n}=e,{onActivation:r}=s;return n.button===hs.RightClick?!1:(r==null||r({event:n}),!0)}}];const rs={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ma extends bs{constructor(s){super(s,rs)}static setup(){return window.addEventListener(rs.move.name,s,{capture:!1,passive:!1}),function(){window.removeEventListener(rs.move.name,s)};function s(){}}}ma.activators=[{eventName:"onTouchStart",handler:(e,s)=>{let{nativeEvent:n}=e,{onActivation:r}=s;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var bt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(bt||(bt={}));var Bt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bt||(Bt={}));function fa(e){let{acceleration:s,activator:n=bt.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:c=Bt.TreeOrder,pointerCoordinates:f,scrollableAncestors:x,scrollableAncestorRects:v,delta:u,threshold:N}=e;const m=xa({delta:u,disabled:!i}),[P,O]=Dr(),j=l.useRef({x:0,y:0}),y=l.useRef({x:0,y:0}),d=l.useMemo(()=>{switch(n){case bt.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case bt.DraggableRect:return a}},[n,a,f]),w=l.useRef(null),M=l.useCallback(()=>{const V=w.current;if(!V)return;const H=j.current.x*y.current.x,X=j.current.y*y.current.y;V.scrollBy(H,X)},[]),q=l.useMemo(()=>c===Bt.TreeOrder?[...x].reverse():x,[c,x]);l.useEffect(()=>{if(!i||!x.length||!d){O();return}for(const V of q){if((r==null?void 0:r(V))===!1)continue;const H=x.indexOf(V),X=v[H];if(!X)continue;const{direction:le,speed:ne}=ta(V,X,d,s,N);for(const ae of["x","y"])m[ae][le[ae]]||(ne[ae]=0,le[ae]=0);if(ne.x>0||ne.y>0){O(),w.current=V,P(M,o),j.current=ne,y.current=le;return}}j.current={x:0,y:0},y.current={x:0,y:0},O()},[s,M,r,O,i,o,JSON.stringify(d),JSON.stringify(m),P,x,q,v,JSON.stringify(N)])}const ga={x:{[ye.Backward]:!1,[ye.Forward]:!1},y:{[ye.Backward]:!1,[ye.Forward]:!1}};function xa(e){let{delta:s,disabled:n}=e;const r=cs(s);return kt(a=>{if(n||!r||!a)return ga;const i={x:Math.sign(s.x-r.x),y:Math.sign(s.y-r.y)};return{x:{[ye.Backward]:a.x[ye.Backward]||i.x===-1,[ye.Forward]:a.x[ye.Forward]||i.x===1},y:{[ye.Backward]:a.y[ye.Backward]||i.y===-1,[ye.Forward]:a.y[ye.Forward]||i.y===1}}},[n,s,r])}function pa(e,s){const n=s!=null?e.get(s):void 0,r=n?n.node.current:null;return kt(a=>{var i;return s==null?null:(i=r??a)!=null?i:null},[r,s])}function va(e,s){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:s(o.handler,r)}));return[...n,...i]},[]),[e,s])}var St;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(St||(St={}));var ms;(function(e){e.Optimized="optimized"})(ms||(ms={}));const Bs=new Map;function ya(e,s){let{dragging:n,dependencies:r,config:a}=s;const[i,o]=l.useState(null),{frequency:c,measure:f,strategy:x}=a,v=l.useRef(e),u=j(),N=wt(u),m=l.useCallback(function(y){y===void 0&&(y=[]),!N.current&&o(d=>d===null?y:d.concat(y.filter(w=>!d.includes(w))))},[N]),P=l.useRef(null),O=kt(y=>{if(u&&!n)return Bs;if(!y||y===Bs||v.current!==e||i!=null){const d=new Map;for(let w of e){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){d.set(w.id,w.rect.current);continue}const M=w.node.current,q=M?new vs(f(M),M):null;w.rect.current=q,q&&d.set(w.id,q)}return d}return y},[e,i,n,u,f]);return l.useEffect(()=>{v.current=e},[e]),l.useEffect(()=>{u||m()},[n,u]),l.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),l.useEffect(()=>{u||typeof c!="number"||P.current!==null||(P.current=setTimeout(()=>{m(),P.current=null},c))},[c,u,m,...r]),{droppableRects:O,measureDroppableContainers:m,measuringScheduled:i!=null};function j(){switch(x){case St.Always:return!1;case St.BeforeDragging:return n;default:return!n}}}function gn(e,s){return kt(n=>e?n||(typeof s=="function"?s(e):e):null,[s,e])}function ba(e,s){return gn(e,s)}function ja(e){let{callback:s,disabled:n}=e;const r=xs(s),a=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Gt(e){let{callback:s,disabled:n}=e;const r=xs(s),a=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return l.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function wa(e){return new vs(ct(e),e)}function Vs(e,s,n){s===void 0&&(s=wa);const[r,a]=l.useState(null);function i(){a(f=>{if(!e)return null;if(e.isConnected===!1){var x;return(x=f??n)!=null?x:null}const v=s(e);return JSON.stringify(f)===JSON.stringify(v)?f:v})}const o=ja({callback(f){if(e)for(const x of f){const{type:v,target:u}=x;if(v==="childList"&&u instanceof HTMLElement&&u.contains(e)){i();break}}}}),c=Gt({callback:i});return Le(()=>{i(),e?(c==null||c.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[e]),r}function Na(e){const s=gn(e);return on(e,s)}const Hs=[];function Ca(e){const s=l.useRef(e),n=kt(r=>e?r&&r!==Hs&&e&&s.current&&e.parentNode===s.current.parentNode?r:Ut(e):Hs,[e]);return l.useEffect(()=>{s.current=e},[e]),n}function Sa(e){const[s,n]=l.useState(null),r=l.useRef(e),a=l.useCallback(i=>{const o=ss(i.target);o&&n(c=>c?(c.set(o,us(o)),new Map(c)):null)},[]);return l.useEffect(()=>{const i=r.current;if(e!==i){o(i);const c=e.map(f=>{const x=ss(f);return x?(x.addEventListener("scroll",a,{passive:!0}),[x,us(x)]):null}).filter(f=>f!=null);n(c.length?new Map(c):null),r.current=e}return()=>{o(e),o(i)};function o(c){c.forEach(f=>{const x=ss(f);x==null||x.removeEventListener("scroll",a)})}},[a,e]),l.useMemo(()=>e.length?s?Array.from(s.values()).reduce((i,o)=>it(i,o),Te):mn(e):Te,[e,s])}function Ks(e,s){s===void 0&&(s=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},s),l.useEffect(()=>{const r=e!==Te;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Nt(e,n.current):Te}function Da(e){l.useEffect(()=>{if(!Kt)return;const s=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of s)n==null||n()}},e.map(s=>{let{sensor:n}=s;return n}))}function ka(e,s){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,s)},n},{}),[e,s])}function xn(e){return l.useMemo(()=>e?_r(e):null,[e])}const Us=[];function Ra(e,s){s===void 0&&(s=ct);const[n]=e,r=xn(n?Se(n):null),[a,i]=l.useState(Us);function o(){i(()=>e.length?e.map(f=>un(f)?r:new vs(s(f),f)):Us)}const c=Gt({callback:o});return Le(()=>{c==null||c.disconnect(),o(),e.forEach(f=>c==null?void 0:c.observe(f))},[e]),a}function $a(e){if(!e)return null;if(e.children.length>1)return e;const s=e.children[0];return Dt(s)?s:e}function Ma(e){let{measure:s}=e;const[n,r]=l.useState(null),a=l.useCallback(x=>{for(const{target:v}of x)if(Dt(v)){r(u=>{const N=s(v);return u?{...u,width:N.width,height:N.height}:N});break}},[s]),i=Gt({callback:a}),o=l.useCallback(x=>{const v=$a(x);i==null||i.disconnect(),v&&(i==null||i.observe(v)),r(v?s(v):null)},[s,i]),[c,f]=Ft(o);return l.useMemo(()=>({nodeRef:c,rect:n,setRef:f}),[n,c,f])}const Aa=[{sensor:js,options:{}},{sensor:ys,options:{}}],Ea={current:{}},Et={draggable:{measure:Ls},droppable:{measure:Ls,strategy:St.WhileDragging,frequency:ms.Optimized},dragOverlay:{measure:ct}};class jt extends Map{get(s){var n;return s!=null&&(n=super.get(s))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(s=>{let{disabled:n}=s;return!n})}getNodeFor(s){var n,r;return(n=(r=this.get(s))==null?void 0:r.node.current)!=null?n:void 0}}const Ia={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:qt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Et,measureDroppableContainers:qt,windowRect:null,measuringScheduled:!1},Ta={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:qt,draggableNodes:new Map,over:null,measureDroppableContainers:qt},Wt=l.createContext(Ta),pn=l.createContext(Ia);function za(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jt}}}function Pa(e,s){switch(s.type){case ve.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:s.initialCoordinates,active:s.active}};case ve.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:s.coordinates.x-e.draggable.initialCoordinates.x,y:s.coordinates.y-e.draggable.initialCoordinates.y}}};case ve.DragEnd:case ve.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ve.RegisterDroppable:{const{element:n}=s,{id:r}=n,a=new jt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case ve.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=s,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new jt(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ve.UnregisterDroppable:{const{id:n,key:r}=s,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new jt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function La(e){let{disabled:s}=e;const{active:n,activatorEvent:r,draggableNodes:a}=l.useContext(Wt),i=cs(r),o=cs(n==null?void 0:n.id);return l.useEffect(()=>{if(!s&&!r&&i&&o!=null){if(!ps(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:f,node:x}=c;if(!f.current&&!x.current)return;requestAnimationFrame(()=>{for(const v of[f.current,x.current]){if(!v)continue;const u=$r(v);if(u){u.focus();break}}})}},[r,s,a,o,i]),null}function Oa(e,s){let{transform:n,...r}=s;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Fa(e){return l.useMemo(()=>({draggable:{...Et.draggable,...e==null?void 0:e.draggable},droppable:{...Et.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Et.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function qa(e){let{activeNode:s,measure:n,initialRect:r,config:a=!0}=e;const i=l.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Le(()=>{if(!o&&!c||!s){i.current=!1;return}if(i.current||!r)return;const x=s==null?void 0:s.node.current;if(!x||x.isConnected===!1)return;const v=n(x),u=on(v,r);if(o||(u.x=0),c||(u.y=0),i.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const N=ln(x);N&&N.scrollBy({top:u.y,left:u.x})}},[s,o,c,r,n])}const vn=l.createContext({...Te,scaleX:1,scaleY:1});var Xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xe||(Xe={}));const Ba=l.memo(function(s){var n,r,a,i;let{id:o,accessibility:c,autoScroll:f=!0,children:x,sensors:v=Aa,collisionDetection:u=Kr,measuring:N,modifiers:m,...P}=s;const O=l.useReducer(Pa,void 0,za),[j,y]=O,[d,w]=zr(),[M,q]=l.useState(Xe.Uninitialized),V=M===Xe.Initialized,{draggable:{active:H,nodes:X,translate:le},droppable:{containers:ne}}=j,ae=H!=null?X.get(H):null,R=l.useRef({initial:null,translated:null}),U=l.useMemo(()=>{var je;return H!=null?{id:H,data:(je=ae==null?void 0:ae.data)!=null?je:Ea,rect:R}:null},[H,ae]),ie=l.useRef(null),[re,g]=l.useState(null),[p,D]=l.useState(null),$=wt(P,Object.values(P)),E=Rt("DndDescribedBy",o),F=l.useMemo(()=>ne.getEnabled(),[ne]),k=Fa(N),{droppableRects:T,measureDroppableContainers:S,measuringScheduled:W}=ya(F,{dragging:V,dependencies:[le.x,le.y],config:k.droppable}),Y=pa(X,H),de=l.useMemo(()=>p?ds(p):null,[p]),ue=Dn(),xe=ba(Y,k.draggable.measure);qa({activeNode:H!=null?X.get(H):null,config:ue.layoutShiftCompensation,initialRect:xe,measure:k.draggable.measure});const J=Vs(Y,k.draggable.measure,xe),he=Vs(Y?Y.parentElement:null),h=l.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:T,draggableNodes:X,draggingNode:null,draggingNodeRect:null,droppableContainers:ne,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),b=ne.getNodeFor((n=h.current.over)==null?void 0:n.id),z=Ma({measure:k.dragOverlay.measure}),C=(r=z.nodeRef.current)!=null?r:Y,Q=V?(a=z.rect)!=null?a:J:null,Ne=!!(z.nodeRef.current&&z.rect),te=Na(Ne?null:J),dt=xn(C?Se(C):null),fe=Ca(V?b??Y:null),st=Ra(fe),I=Oa(m,{transform:{x:le.x-te.x,y:le.y-te.y,scaleX:1,scaleY:1},activatorEvent:p,active:U,activeNodeRect:J,containerNodeRect:he,draggingNodeRect:Q,over:h.current.over,overlayNodeRect:z.rect,scrollableAncestors:fe,scrollableAncestorRects:st,windowRect:dt}),K=de?it(de,le):null,_=Sa(fe),ee=Ks(_),G=Ks(_,[J]),A=it(I,ee),L=Q?Wr(Q,I):null,B=U&&L?u({active:U,collisionRect:L,droppableRects:T,droppableContainers:F,pointerCoordinates:K}):null,Z=an(B,"id"),[ce,Ie]=l.useState(null),Fe=Ne?I:it(I,G),Xt=Ur(Fe,(i=ce==null?void 0:ce.rect)!=null?i:null,J),ut=l.useRef(null),Cs=l.useCallback((je,De)=>{let{sensor:ke,options:qe}=De;if(ie.current==null)return;const Me=X.get(ie.current);if(!Me)return;const Re=je.nativeEvent,ze=new ke({active:ie.current,activeNode:Me,event:Re,options:qe,context:h,onAbort(be){if(!X.get(be))return;const{onDragAbort:Pe}=$.current,Oe={id:be};Pe==null||Pe(Oe),d({type:"onDragAbort",event:Oe})},onPending(be,Be,Pe,Oe){if(!X.get(be))return;const{onDragPending:mt}=$.current,Ve={id:be,constraint:Be,initialCoordinates:Pe,offset:Oe};mt==null||mt(Ve),d({type:"onDragPending",event:Ve})},onStart(be){const Be=ie.current;if(Be==null)return;const Pe=X.get(Be);if(!Pe)return;const{onDragStart:Oe}=$.current,ht={activatorEvent:Re,active:{id:Be,data:Pe.data,rect:R}};gt.unstable_batchedUpdates(()=>{Oe==null||Oe(ht),q(Xe.Initializing),y({type:ve.DragStart,initialCoordinates:be,active:Be}),d({type:"onDragStart",event:ht}),g(ut.current),D(Re)})},onMove(be){y({type:ve.DragMove,coordinates:be})},onEnd:nt(ve.DragEnd),onCancel:nt(ve.DragCancel)});ut.current=ze;function nt(be){return async function(){const{active:Pe,collisions:Oe,over:ht,scrollAdjustedTranslate:mt}=h.current;let Ve=null;if(Pe&&mt){const{cancelDrop:ft}=$.current;Ve={activatorEvent:Re,active:Pe,collisions:Oe,delta:mt,over:ht},be===ve.DragEnd&&typeof ft=="function"&&await Promise.resolve(ft(Ve))&&(be=ve.DragCancel)}ie.current=null,gt.unstable_batchedUpdates(()=>{y({type:be}),q(Xe.Uninitialized),Ie(null),g(null),D(null),ut.current=null;const ft=be===ve.DragEnd?"onDragEnd":"onDragCancel";if(Ve){const Yt=$.current[ft];Yt==null||Yt(Ve),d({type:ft,event:Ve})}})}}},[X]),Nn=l.useCallback((je,De)=>(ke,qe)=>{const Me=ke.nativeEvent,Re=X.get(qe);if(ie.current!==null||!Re||Me.dndKit||Me.defaultPrevented)return;const ze={active:Re};je(ke,De.options,ze)===!0&&(Me.dndKit={capturedBy:De.sensor},ie.current=qe,Cs(ke,De))},[X,Cs]),Ss=va(v,Nn);Da(v),Le(()=>{J&&M===Xe.Initializing&&q(Xe.Initialized)},[J,M]),l.useEffect(()=>{const{onDragMove:je}=$.current,{active:De,activatorEvent:ke,collisions:qe,over:Me}=h.current;if(!De||!ke)return;const Re={active:De,activatorEvent:ke,collisions:qe,delta:{x:A.x,y:A.y},over:Me};gt.unstable_batchedUpdates(()=>{je==null||je(Re),d({type:"onDragMove",event:Re})})},[A.x,A.y]),l.useEffect(()=>{const{active:je,activatorEvent:De,collisions:ke,droppableContainers:qe,scrollAdjustedTranslate:Me}=h.current;if(!je||ie.current==null||!De||!Me)return;const{onDragOver:Re}=$.current,ze=qe.get(Z),nt=ze&&ze.rect.current?{id:ze.id,rect:ze.rect.current,data:ze.data,disabled:ze.disabled}:null,be={active:je,activatorEvent:De,collisions:ke,delta:{x:Me.x,y:Me.y},over:nt};gt.unstable_batchedUpdates(()=>{Ie(nt),Re==null||Re(be),d({type:"onDragOver",event:be})})},[Z]),Le(()=>{h.current={activatorEvent:p,active:U,activeNode:Y,collisionRect:L,collisions:B,droppableRects:T,draggableNodes:X,draggingNode:C,draggingNodeRect:Q,droppableContainers:ne,over:ce,scrollableAncestors:fe,scrollAdjustedTranslate:A},R.current={initial:Q,translated:L}},[U,Y,B,L,X,C,Q,T,ne,ce,fe,A]),fa({...ue,delta:le,draggingRect:L,pointerCoordinates:K,scrollableAncestors:fe,scrollableAncestorRects:st});const Cn=l.useMemo(()=>({active:U,activeNode:Y,activeNodeRect:J,activatorEvent:p,collisions:B,containerNodeRect:he,dragOverlay:z,draggableNodes:X,droppableContainers:ne,droppableRects:T,over:ce,measureDroppableContainers:S,scrollableAncestors:fe,scrollableAncestorRects:st,measuringConfiguration:k,measuringScheduled:W,windowRect:dt}),[U,Y,J,p,B,he,z,X,ne,T,ce,S,fe,st,k,W,dt]),Sn=l.useMemo(()=>({activatorEvent:p,activators:Ss,active:U,activeNodeRect:J,ariaDescribedById:{draggable:E},dispatch:y,draggableNodes:X,over:ce,measureDroppableContainers:S}),[p,Ss,U,J,y,E,X,ce,S]);return Ce.createElement(sn.Provider,{value:w},Ce.createElement(Wt.Provider,{value:Sn},Ce.createElement(pn.Provider,{value:Cn},Ce.createElement(vn.Provider,{value:Xt},x)),Ce.createElement(La,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Ce.createElement(Or,{...c,hiddenTextDescribedById:E}));function Dn(){const je=(re==null?void 0:re.autoScrollEnabled)===!1,De=typeof f=="object"?f.enabled===!1:f===!1,ke=V&&!je&&!De;return typeof f=="object"?{...f,enabled:ke}:{enabled:ke}}}),Va=l.createContext(null),Gs="button",Ha="Draggable";function Ka(e){let{id:s,data:n,disabled:r=!1,attributes:a}=e;const i=Rt(Ha),{activators:o,activatorEvent:c,active:f,activeNodeRect:x,ariaDescribedById:v,draggableNodes:u,over:N}=l.useContext(Wt),{role:m=Gs,roleDescription:P="draggable",tabIndex:O=0}=a??{},j=(f==null?void 0:f.id)===s,y=l.useContext(j?vn:Va),[d,w]=Ft(),[M,q]=Ft(),V=ka(o,s),H=wt(n);Le(()=>(u.set(s,{id:s,key:i,node:d,activatorNode:M,data:H}),()=>{const le=u.get(s);le&&le.key===i&&u.delete(s)}),[u,s]);const X=l.useMemo(()=>({role:m,tabIndex:O,"aria-disabled":r,"aria-pressed":j&&m===Gs?!0:void 0,"aria-roledescription":P,"aria-describedby":v.draggable}),[r,m,O,j,P,v.draggable]);return{active:f,activatorEvent:c,activeNodeRect:x,attributes:X,isDragging:j,listeners:r?void 0:V,node:d,over:N,setNodeRef:w,setActivatorNodeRef:q,transform:y}}function Ua(){return l.useContext(pn)}const Ga="Droppable",Wa={timeout:25};function Xa(e){let{data:s,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Rt(Ga),{active:o,dispatch:c,over:f,measureDroppableContainers:x}=l.useContext(Wt),v=l.useRef({disabled:n}),u=l.useRef(!1),N=l.useRef(null),m=l.useRef(null),{disabled:P,updateMeasurementsFor:O,timeout:j}={...Wa,...a},y=wt(O??r),d=l.useCallback(()=>{if(!u.current){u.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{x(Array.isArray(y.current)?y.current:[y.current]),m.current=null},j)},[j]),w=Gt({callback:d,disabled:P||!o}),M=l.useCallback((X,le)=>{w&&(le&&(w.unobserve(le),u.current=!1),X&&w.observe(X))},[w]),[q,V]=Ft(M),H=wt(s);return l.useEffect(()=>{!w||!q.current||(w.disconnect(),u.current=!1,w.observe(q.current))},[q,w]),l.useEffect(()=>(c({type:ve.RegisterDroppable,element:{id:r,key:i,disabled:n,node:q,rect:N,data:H}}),()=>c({type:ve.UnregisterDroppable,key:i,id:r})),[r]),l.useEffect(()=>{n!==v.current.disabled&&(c({type:ve.SetDroppableDisabled,id:r,key:i,disabled:n}),v.current.disabled=n)},[r,i,n,c]),{active:o,rect:N,isOver:(f==null?void 0:f.id)===r,node:q,over:f,setNodeRef:V}}function ws(e,s,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(s,1)[0]),r}function Ya(e,s){return e.reduce((n,r,a)=>{const i=s.get(r);return i&&(n[a]=i),n},Array(e.length))}function $t(e){return e!==null&&e>=0}function Qa(e,s){if(e===s)return!0;if(e.length!==s.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==s[n])return!1;return!0}function _a(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Ns=e=>{let{rects:s,activeIndex:n,overIndex:r,index:a}=e;const i=ws(s,r,n),o=s[a],c=i[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},yn="Sortable",bn=Ce.createContext({activeIndex:-1,containerId:yn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ns,disabled:{draggable:!1,droppable:!1}});function Ja(e){let{children:s,id:n,items:r,strategy:a=Ns,disabled:i=!1}=e;const{active:o,dragOverlay:c,droppableRects:f,over:x,measureDroppableContainers:v}=Ua(),u=Rt(yn,n),N=c.rect!==null,m=l.useMemo(()=>r.map(V=>typeof V=="object"&&"id"in V?V.id:V),[r]),P=o!=null,O=o?m.indexOf(o.id):-1,j=x?m.indexOf(x.id):-1,y=l.useRef(m),d=!Qa(m,y.current),w=j!==-1&&O===-1||d,M=_a(i);Le(()=>{d&&P&&v(m)},[d,m,P,v]),l.useEffect(()=>{y.current=m},[m]);const q=l.useMemo(()=>({activeIndex:O,containerId:u,disabled:M,disableTransforms:w,items:m,overIndex:j,useDragOverlay:N,sortedRects:Ya(m,f),strategy:a}),[O,u,M.draggable,M.droppable,w,m,j,f,N,a]);return Ce.createElement(bn.Provider,{value:q},s)}const Za=e=>{let{id:s,items:n,activeIndex:r,overIndex:a}=e;return ws(n,r,a).indexOf(s)},ei=e=>{let{containerId:s,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:c,previousContainerId:f,transition:x}=e;return!x||!r||c!==i&&a===o?!1:n?!0:o!==a&&s===f},ti={duration:200,easing:"ease"},jn="transform",si=Ct.Transition.toString({property:jn,duration:0,easing:"linear"}),ni={roleDescription:"sortable"};function ri(e){let{disabled:s,index:n,node:r,rect:a}=e;const[i,o]=l.useState(null),c=l.useRef(n);return Le(()=>{if(!s&&n!==c.current&&r.current){const f=a.current;if(f){const x=ct(r.current,{ignoreTransform:!0}),v={x:f.left-x.left,y:f.top-x.top,scaleX:f.width/x.width,scaleY:f.height/x.height};(v.x||v.y)&&o(v)}}n!==c.current&&(c.current=n)},[s,n,r,a]),l.useEffect(()=>{i&&o(null)},[i]),i}function ai(e){let{animateLayoutChanges:s=ei,attributes:n,disabled:r,data:a,getNewIndex:i=Za,id:o,strategy:c,resizeObserverConfig:f,transition:x=ti}=e;const{items:v,containerId:u,activeIndex:N,disabled:m,disableTransforms:P,sortedRects:O,overIndex:j,useDragOverlay:y,strategy:d}=l.useContext(bn),w=ii(r,m),M=v.indexOf(o),q=l.useMemo(()=>({sortable:{containerId:u,index:M,items:v},...a}),[u,a,M,v]),V=l.useMemo(()=>v.slice(v.indexOf(o)),[v,o]),{rect:H,node:X,isOver:le,setNodeRef:ne}=Xa({id:o,data:q,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:V,...f}}),{active:ae,activatorEvent:R,activeNodeRect:U,attributes:ie,setNodeRef:re,listeners:g,isDragging:p,over:D,setActivatorNodeRef:$,transform:E}=Ka({id:o,data:q,attributes:{...ni,...n},disabled:w.draggable}),F=Sr(ne,re),k=!!ae,T=k&&!P&&$t(N)&&$t(j),S=!y&&p,W=S&&T?E:null,de=T?W??(c??d)({rects:O,activeNodeRect:U,activeIndex:N,overIndex:j,index:M}):null,ue=$t(N)&&$t(j)?i({id:o,items:v,activeIndex:N,overIndex:j}):M,xe=ae==null?void 0:ae.id,J=l.useRef({activeId:xe,items:v,newIndex:ue,containerId:u}),he=v!==J.current.items,h=s({active:ae,containerId:u,isDragging:p,isSorting:k,id:o,index:M,items:v,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:x,wasDragging:J.current.activeId!=null}),b=ri({disabled:!h,index:M,node:X,rect:H});return l.useEffect(()=>{k&&J.current.newIndex!==ue&&(J.current.newIndex=ue),u!==J.current.containerId&&(J.current.containerId=u),v!==J.current.items&&(J.current.items=v)},[k,ue,u,v]),l.useEffect(()=>{if(xe===J.current.activeId)return;if(xe!=null&&J.current.activeId==null){J.current.activeId=xe;return}const C=setTimeout(()=>{J.current.activeId=xe},50);return()=>clearTimeout(C)},[xe]),{active:ae,activeIndex:N,attributes:ie,data:q,rect:H,index:M,newIndex:ue,items:v,isOver:le,isSorting:k,isDragging:p,listeners:g,node:X,overIndex:j,over:D,setNodeRef:F,setActivatorNodeRef:$,setDroppableNodeRef:ne,setDraggableNodeRef:re,transform:b??de,transition:z()};function z(){if(b||he&&J.current.newIndex===M)return si;if(!(S&&!ps(R)||!x)&&(k||h))return Ct.Transition.toString({...x,property:jn})}}function ii(e,s){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:s.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:s.droppable}}function Vt(e){if(!e)return!1;const s=e.data.current;return!!(s&&"sortable"in s&&typeof s.sortable=="object"&&"containerId"in s.sortable&&"items"in s.sortable&&"index"in s.sortable)}const oi=[se.Down,se.Right,se.Up,se.Left],li=(e,s)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:c}}=s;if(oi.includes(e.code)){if(e.preventDefault(),!n||!r)return;const f=[];i.getEnabled().forEach(u=>{if(!u||u!=null&&u.disabled)return;const N=a.get(u.id);if(N)switch(e.code){case se.Down:r.top<N.top&&f.push(u);break;case se.Up:r.top>N.top&&f.push(u);break;case se.Left:r.left>N.left&&f.push(u);break;case se.Right:r.left<N.left&&f.push(u);break}});const x=Vr({collisionRect:r,droppableRects:a,droppableContainers:f});let v=an(x,"id");if(v===(o==null?void 0:o.id)&&x.length>1&&(v=x[1].id),v!=null){const u=i.get(n.id),N=i.get(v),m=N?a.get(N.id):null,P=N==null?void 0:N.node.current;if(P&&m&&u&&N){const j=Ut(P).some((V,H)=>c[H]!==V),y=wn(u,N),d=ci(u,N),w=j||!y?{x:0,y:0}:{x:d?r.width-m.width:0,y:d?r.height-m.height:0},M={x:m.left,y:m.top};return w.x&&w.y?M:Nt(M,w)}}}};function wn(e,s){return!Vt(e)||!Vt(s)?!1:e.data.current.sortable.containerId===s.data.current.sortable.containerId}function ci(e,s){return!Vt(e)||!Vt(s)||!wn(e,s)?!1:e.data.current.sortable.index<s.data.current.sortable.index}const oe=["#01B8AA","#374649","#FD625E","#F2C80F","#5F6B6D","#8AD4EB","#FE9666","#A66999","#3599B8","#DFBFBF"],di=({tile:e,isSelected:s,onSelect:n,viewMode:r,onResize:a,isDragging:i})=>{var P,O;const{attributes:o,listeners:c,setNodeRef:f,transform:x,transition:v}=ai({id:e.id}),u={transform:Ct.Transform.toString(x),transition:v},N={small:"col-span-1",medium:r==="grid"?"col-span-1 md:col-span-2":"col-span-1",large:r==="grid"?"col-span-1 md:col-span-2 lg:col-span-3":"col-span-1"},m=()=>{const j=["small","medium","large"],y=j.indexOf(e.size),d=j[(y+1)%j.length];a==null||a(e.id,d)};return t.jsx("div",{ref:f,style:u,className:N[e.size],children:t.jsxs(ge,{className:`group cursor-pointer transition-all hover:shadow-xl hover:scale-[1.01] ${s?"ring-2 ring-primary":""} ${i?"opacity-50 scale-105 shadow-2xl":""}`,onClick:n,children:[t.jsx(et,{className:"pb-2",children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("div",{...o,...c,className:"cursor-grab active:cursor-grabbing p-1 -ml-1 rounded hover:bg-muted opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(vr,{className:"h-4 w-4 text-muted-foreground"})}),t.jsx(tt,{className:"text-sm font-medium truncate flex-1",children:e.title}),t.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(me,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:j=>{j.stopPropagation(),m()},children:e.size==="large"?t.jsx(br,{className:"h-3 w-3"}):t.jsx(_n,{className:"h-3 w-3"})})})]})}),t.jsxs(we,{children:[e.type==="kpi"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-3xl font-bold",style:{color:e.color},children:(P=e.value)==null?void 0:P.toLocaleString(void 0,{maximumFractionDigits:2})}),e.change!==void 0&&t.jsxs("div",{className:`flex items-center text-sm ${e.change>=0?"text-green-500":"text-red-500"}`,children:[e.change>=0?t.jsx(Pt,{className:"h-4 w-4 mr-1"}):t.jsx(Ht,{className:"h-4 w-4 mr-1"}),e.change>=0?"+":"",e.change.toFixed(2),"%"]})]}),e.type==="bar"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(es,{data:e.data,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"name",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),t.jsx(rt,{dataKey:"value",fill:e.color||oe[0],radius:[4,4,0,0]})]})})}),e.type==="line"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(Jn,{data:e.data,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"index",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),t.jsx(is,{type:"monotone",dataKey:"value",stroke:e.color||oe[2],strokeWidth:2,dot:!1})]})})}),e.type==="pie"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(Zn,{children:[t.jsx(er,{data:e.data,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"value",label:({name:j})=>j,labelLine:!1,children:e.data.map((j,y)=>t.jsx(ir,{fill:oe[y%oe.length]},`cell-${y}`))}),t.jsx(Ue,{})]})})}),e.type==="area"&&e.data&&t.jsx("div",{className:"h-40",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(dr,{data:e.data,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:`gradient-${e.id}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:e.color||oe[4],stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:e.color||oe[4],stopOpacity:0})]})}),t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"index",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{}),t.jsx(Qs,{type:"monotone",dataKey:"value",stroke:e.color||oe[4],fill:`url(#gradient-${e.id})`})]})})}),e.type==="scatter"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(cr,{children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{type:"number",dataKey:"x",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))",name:e.xAxis}),t.jsx(We,{type:"number",dataKey:"y",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))",name:e.yAxis}),t.jsx(Ue,{cursor:{strokeDasharray:"3 3"}}),t.jsx(Ys,{data:e.data,fill:e.color||oe[5]})]})})}),e.type==="combo"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(Cr,{data:e.data,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"name",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{}),t.jsx(or,{}),t.jsx(rt,{dataKey:Object.keys(e.data[0]||{})[1]||"value",fill:oe[0],radius:[4,4,0,0]}),t.jsx(is,{type:"monotone",dataKey:Object.keys(e.data[0]||{})[2]||"value2",stroke:oe[2],strokeWidth:2})]})})}),e.type==="gauge"&&e.data&&t.jsx("div",{className:"h-32 flex items-center justify-center",children:t.jsxs("div",{className:"relative w-32 h-16 overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 rounded-t-full border-8 border-muted"}),t.jsx("div",{className:"absolute inset-0 rounded-t-full border-8 origin-bottom transition-transform duration-1000",style:{borderColor:e.color||oe[7],clipPath:`polygon(0 0, ${e.value||50}% 0, ${e.value||50}% 100%, 0 100%)`}}),t.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 text-center",children:t.jsxs("span",{className:"text-xl font-bold",children:[(O=e.value)==null?void 0:O.toFixed(0),"%"]})})]})}),e.type==="histogram"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(es,{data:e.data,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"name",tick:{fontSize:8},stroke:"hsl(var(--muted-foreground))",angle:-45,textAnchor:"end",height:50}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{}),t.jsx(rt,{dataKey:"value",fill:e.color||oe[6]})]})})}),e.type==="treemap"&&e.data&&t.jsx("div",{className:"h-48 grid grid-cols-4 gap-1 p-2",children:e.data.slice(0,12).map((j,y)=>{var M,q;const d=Math.max(...e.data.map(V=>V.value||0)),w=(j.value||0)/d;return t.jsx("div",{className:"rounded flex items-center justify-center text-white text-xs font-medium p-1 truncate",style:{backgroundColor:oe[y%oe.length],opacity:.5+w*.5,gridColumn:w>.5?"span 2":"span 1",gridRow:w>.7?"span 2":"span 1"},title:`${j.name}: ${(M=j.value)==null?void 0:M.toFixed(2)}`,children:((q=j.name)==null?void 0:q.split("/")[1])||j.name},y)})}),e.type==="funnel"&&e.data&&t.jsx("div",{className:"h-48 flex flex-col justify-center space-y-1 px-4",children:e.data.map((j,y)=>{var M,q;const d=((M=e.data[0])==null?void 0:M.value)||1,w=(j.value||0)/d*100;return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-6 rounded-r-full flex items-center justify-end pr-2 text-white text-xs font-medium transition-all",style:{width:`${w}%`,backgroundColor:oe[y%oe.length],minWidth:"40px"},children:(q=j.value)==null?void 0:q.toFixed(0)}),t.jsx("span",{className:"text-xs text-muted-foreground truncate",children:j.name})]},y)})}),e.type==="waterfall"&&e.data&&t.jsx("div",{className:"h-48",children:t.jsx(Ke,{width:"100%",height:"100%",children:t.jsxs(es,{data:e.data,children:[t.jsx(_e,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),t.jsx(Ge,{dataKey:"name",tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(We,{tick:{fontSize:10},stroke:"hsl(var(--muted-foreground))"}),t.jsx(Ue,{}),t.jsx(rt,{dataKey:"start",stackId:"a",fill:"transparent"}),t.jsx(rt,{dataKey:"value",stackId:"a",fill:e.color||oe[9],radius:[4,4,0,0]})]})})}),e.type==="boxplot"&&e.data&&t.jsx("div",{className:"h-48 flex items-end justify-around px-4 pb-6",children:e.data.map((j,y)=>{const d=Math.max(...e.data.map(M=>M.max||0)),w=M=>M/d*140;return t.jsxs("div",{className:"flex flex-col items-center relative",style:{height:"100%"},children:[t.jsx("div",{className:"absolute w-px bg-muted-foreground",style:{bottom:`${w(j.min||0)}px`,height:`${w((j.max||0)-(j.min||0))}px`}}),t.jsx("div",{className:"absolute w-8 rounded",style:{bottom:`${w(j.q1||0)}px`,height:`${w((j.q3||0)-(j.q1||0))}px`,backgroundColor:oe[y%oe.length]}}),t.jsx("div",{className:"absolute w-8 h-0.5 bg-white",style:{bottom:`${w(j.median||0)}px`}}),t.jsx("span",{className:"absolute -bottom-5 text-[10px] text-muted-foreground truncate max-w-12",children:j.name})]},y)})})]})]})})},ui=({correlations:e,numericColumns:s})=>{const n=l.useMemo(()=>{const i={};return s.forEach(o=>{i[o]={},s.forEach(c=>{i[o][c]=o===c?1:0})}),e.forEach(o=>{i[o.column1]&&i[o.column2]&&(i[o.column1][o.column2]=o.coefficient,i[o.column2][o.column1]=o.coefficient)}),i},[e,s]),r=i=>{const o=Math.abs(i);return i===1?"hsl(var(--primary))":i>0?o>=.7?"hsl(142, 76%, 36%)":o>=.4?"hsl(142, 71%, 45%)":o>=.2?"hsl(142, 69%, 58%)":"hsl(142, 77%, 73%)":o>=.7?"hsl(0, 84%, 40%)":o>=.4?"hsl(0, 72%, 51%)":o>=.2?"hsl(0, 84%, 60%)":"hsl(0, 93%, 74%)"},a=i=>Math.abs(i)>=.4?"white":"hsl(var(--foreground))";return s.length<2?t.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[t.jsx(Ot,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"Need at least 2 numeric columns for correlation heatmap"})]}):t.jsxs(ge,{className:"bg-gradient-to-br from-purple-500/5 via-pink-500/5 to-transparent border-purple-500/20",children:[t.jsxs(et,{className:"pb-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(tt,{className:"text-lg flex items-center gap-2",children:[t.jsx(Ot,{className:"h-5 w-5 text-purple-500"}),"Correlation Heatmap"]}),t.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Pt,{className:"h-3 w-3 text-green-500"}),t.jsx("span",{className:"text-muted-foreground",children:"Positive"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Ht,{className:"h-3 w-3 text-red-500"}),t.jsx("span",{className:"text-muted-foreground",children:"Negative"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"hsl(142, 76%, 36%)"}}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Strong +"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"hsl(142, 77%, 73%)"}}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Weak +"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"hsl(0, 93%, 74%)"}}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Weak -"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"hsl(0, 84%, 40%)"}}),t.jsx("span",{className:"text-xs text-muted-foreground",children:"Strong -"})]})]})]}),t.jsx(we,{children:t.jsxs(Je,{className:"w-full",children:[t.jsx("div",{className:"min-w-max",children:t.jsx(kn,{children:t.jsxs("div",{className:"grid",style:{gridTemplateColumns:`120px repeat(${s.length}, 60px)`,gap:"2px"},children:[t.jsx("div",{className:"h-12"})," ",s.map(i=>t.jsx("div",{className:"h-12 flex items-end justify-center pb-1",children:t.jsx("span",{className:"text-xs font-medium text-muted-foreground transform -rotate-45 origin-bottom-left whitespace-nowrap truncate max-w-[80px]",title:i,children:i.length>10?`${i.slice(0,10)}...`:i})},`header-${i}`)),s.map(i=>t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"h-10 flex items-center pr-2 justify-end",children:t.jsx("span",{className:"text-xs font-medium text-muted-foreground truncate max-w-[110px]",title:i,children:i.length>12?`${i.slice(0,12)}...`:i})},`row-label-${i}`),s.map(o=>{var x;const c=((x=n[i])==null?void 0:x[o])??0,f=i===o;return t.jsxs(Rn,{children:[t.jsx($n,{asChild:!0,children:t.jsx("div",{className:`h-10 w-[60px] flex items-center justify-center rounded cursor-pointer transition-all hover:scale-105 hover:shadow-lg ${f?"ring-2 ring-primary/30":""}`,style:{backgroundColor:r(c),color:a(c)},children:t.jsx("span",{className:"text-xs font-mono font-medium",children:c.toFixed(2)})})}),t.jsx(Mn,{side:"top",className:"max-w-xs",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs("p",{className:"font-semibold text-sm",children:[i,"  ",o]}),t.jsxs("p",{className:"text-xs",children:["Correlation: ",t.jsx("span",{className:"font-mono",children:c.toFixed(4)})]}),!f&&t.jsxs(pe,{variant:"secondary",className:"text-xs",children:[Math.abs(c)>=.7?"Strong":Math.abs(c)>=.4?"Moderate":Math.abs(c)>=.2?"Weak":"None"," ",c>.1?"Positive":c<-.1?"Negative":""]})]})})]},`cell-${i}-${o}`)})]}))]})})}),t.jsx(An,{orientation:"horizontal"})]})})]})},hi=({columnProfiles:e,data:s,onDismiss:n})=>{const r=l.useMemo(()=>{const u=[];e.forEach(m=>{if(m.nullPercentage>50?u.push({id:`missing-critical-${m.name}`,column:m.name,severity:"critical",category:"missing",title:"Critical Missing Data",description:`${m.nullPercentage.toFixed(1)}% of values are missing (${m.nullCount.toLocaleString()} rows)`,impact:"May cause analysis errors or biased results",recommendation:"Consider removing this column or imputing missing values with mean/median",metric:m.nullPercentage}):m.nullPercentage>20?u.push({id:`missing-warning-${m.name}`,column:m.name,severity:"warning",category:"missing",title:"Significant Missing Data",description:`${m.nullPercentage.toFixed(1)}% of values are missing`,impact:"May affect statistical calculations",recommendation:"Review data collection process; consider imputation strategies",metric:m.nullPercentage}):m.nullPercentage>5&&u.push({id:`missing-info-${m.name}`,column:m.name,severity:"info",category:"missing",title:"Some Missing Values",description:`${m.nullPercentage.toFixed(1)}% of values are missing`,impact:"Minor impact on analysis",recommendation:"Handle missing values in calculations using appropriate methods",metric:m.nullPercentage}),m.type==="categorical"&&(m.uniquePercentage>90?u.push({id:`cardinality-high-${m.name}`,column:m.name,severity:"warning",category:"cardinality",title:"High Cardinality",description:`${m.uniqueCount.toLocaleString()} unique values (${m.uniquePercentage.toFixed(1)}% unique)`,impact:"May not be suitable for grouping or categorical analysis",recommendation:"Consider binning, grouping similar values, or treating as ID column",metric:m.uniquePercentage}):m.uniqueCount===1&&u.push({id:`cardinality-single-${m.name}`,column:m.name,severity:"warning",category:"cardinality",title:"Single Value Column",description:"Column contains only one unique value",impact:"Provides no analytical value for comparisons",recommendation:"Consider removing this column from analysis",metric:1})),m.type==="numeric"&&m.mean!==void 0&&m.stdDev!==void 0){const P=m.stdDev/Math.abs(m.mean)*100;P>200&&m.mean!==0&&u.push({id:`outliers-${m.name}`,column:m.name,severity:"warning",category:"outliers",title:"High Variability Detected",description:`Coefficient of variation: ${P.toFixed(1)}% (std: ${m.stdDev.toFixed(2)}, mean: ${m.mean.toFixed(2)})`,impact:"May contain outliers that skew analysis",recommendation:"Review data for outliers; consider using median instead of mean",metric:P});const j=s.filter(y=>Number(y[m.name])===0).length/s.length*100;j>50&&m.min===0&&u.push({id:`zeros-${m.name}`,column:m.name,severity:"info",category:"distribution",title:"Zero-Inflated Distribution",description:`${j.toFixed(1)}% of values are zero`,impact:"May require specialized statistical methods",recommendation:"Consider zero-inflated models or separate zero/non-zero analysis",metric:j})}if(m.type==="mixed"&&u.push({id:`type-mixed-${m.name}`,column:m.name,severity:"warning",category:"type",title:"Mixed Data Types",description:"Column contains multiple data types",impact:"May cause type errors in calculations",recommendation:"Clean and standardize data types before analysis"}),m.type==="text"&&m.uniquePercentage<100&&m.uniqueCount>s.length*.9){const P=s.length-m.uniqueCount;P>0&&m.name.toLowerCase().includes("id")&&u.push({id:`duplicates-${m.name}`,column:m.name,severity:"critical",category:"duplicates",title:"Potential Duplicate IDs",description:`${P.toLocaleString()} duplicate values found in potential ID column`,impact:"May indicate data integrity issues",recommendation:"Investigate and resolve duplicate records",metric:P})}});const N={critical:0,warning:1,info:2};return u.sort((m,P)=>N[m.severity]-N[P.severity])},[e,s]),a=l.useMemo(()=>{if(e.length===0)return 0;const u=e.reduce((N,m)=>N+m.qualityScore,0)/e.length;return Math.round(u)},[e]),i=u=>{switch(u){case"critical":return t.jsx(Mt,{className:"h-5 w-5 text-red-500"});case"warning":return t.jsx(Tt,{className:"h-5 w-5 text-yellow-500"});case"info":return t.jsx(As,{className:"h-5 w-5 text-blue-500"})}},o=u=>{switch(u){case"critical":return"border-red-500/50 bg-red-500/5";case"warning":return"border-yellow-500/50 bg-yellow-500/5";case"info":return"border-blue-500/50 bg-blue-500/5"}},c=u=>{switch(u){case"missing":return t.jsx(jr,{className:"h-4 w-4"});case"duplicates":return t.jsx(os,{className:"h-4 w-4"});case"outliers":return t.jsx(Ht,{className:"h-4 w-4"});case"type":return t.jsx(zt,{className:"h-4 w-4"});case"distribution":return t.jsx(_s,{className:"h-4 w-4"});case"cardinality":return t.jsx(os,{className:"h-4 w-4"})}},f=r.filter(u=>u.severity==="critical").length,x=r.filter(u=>u.severity==="warning").length,v=r.filter(u=>u.severity==="info").length;return t.jsxs(ge,{className:"bg-gradient-to-br from-orange-500/5 via-red-500/5 to-transparent border-orange-500/20",children:[t.jsxs(et,{children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-3 rounded-xl shadow-lg ${f>0?"bg-gradient-to-br from-red-500 to-orange-600 shadow-red-500/25":x>0?"bg-gradient-to-br from-yellow-500 to-orange-500 shadow-yellow-500/25":"bg-gradient-to-br from-green-500 to-emerald-600 shadow-green-500/25"}`,children:t.jsx(Zs,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsxs(tt,{className:"text-xl flex items-center gap-2",children:["Data Quality Alerts",r.length===0?t.jsxs(pe,{className:"bg-green-500/10 text-green-600 border-green-500/30",children:[t.jsx(Ze,{className:"h-3 w-3 mr-1"}),"All Clear"]}):t.jsxs(pe,{variant:"secondary",children:[r.length," issue",r.length!==1?"s":""," found"]})]}),t.jsx(It,{className:"mt-1",children:"Automatic detection of data quality issues and recommendations"})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold",style:{color:a>=80?"hsl(142, 76%, 36%)":a>=60?"hsl(47, 100%, 50%)":"hsl(0, 84%, 60%)"},children:[a,"%"]}),t.jsx("div",{className:"text-xs text-muted-foreground",children:"Quality Score"})]}),t.jsx("div",{className:"h-10 w-px bg-border"}),t.jsxs("div",{className:"flex gap-3 text-sm",children:[f>0&&t.jsxs("div",{className:"flex items-center gap-1 text-red-500",children:[t.jsx(Mt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:f})]}),x>0&&t.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[t.jsx(Tt,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:x})]}),v>0&&t.jsxs("div",{className:"flex items-center gap-1 text-blue-500",children:[t.jsx(As,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:v})]})]})]})]}),t.jsxs("div",{className:"mt-4 space-y-1",children:[t.jsx(Lt,{value:a,className:"h-2"}),t.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[t.jsx("span",{children:"Poor"}),t.jsx("span",{children:"Fair"}),t.jsx("span",{children:"Good"}),t.jsx("span",{children:"Excellent"})]})]})]}),t.jsx(we,{children:r.length===0?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(Ze,{className:"h-16 w-16 mx-auto mb-4 text-green-500"}),t.jsx("p",{className:"text-lg font-medium text-green-600",children:"No Data Quality Issues Detected"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Your dataset appears to be clean and ready for analysis"})]}):t.jsx(Je,{className:"h-[400px] pr-4",children:t.jsx("div",{className:"space-y-3",children:r.map(u=>t.jsx(ge,{className:`p-4 ${o(u.severity)}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[i(u.severity),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx("h4",{className:"font-semibold text-sm",children:u.title}),t.jsxs(pe,{variant:"outline",className:"text-xs gap-1",children:[c(u.category),u.category]}),t.jsx(pe,{variant:"secondary",className:"text-xs font-mono",children:u.column})]}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:u.description}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3 text-xs",children:[t.jsxs("div",{className:"flex items-start gap-1.5",children:[t.jsx(En,{className:"h-3.5 w-3.5 text-orange-500 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Impact: "}),t.jsx("span",{className:"text-muted-foreground",children:u.impact})]})]}),t.jsxs("div",{className:"flex items-start gap-1.5",children:[t.jsx(In,{className:"h-3.5 w-3.5 text-green-500 mt-0.5 shrink-0"}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"Action: "}),t.jsx("span",{className:"text-muted-foreground",children:u.recommendation})]})]})]}),u.metric!==void 0&&t.jsx("div",{className:"mt-2",children:t.jsx(Lt,{value:Math.min(u.metric,100),className:`h-1.5 ${u.severity==="critical"?"[&>div]:bg-red-500":u.severity==="warning"?"[&>div]:bg-yellow-500":"[&>div]:bg-blue-500"}`})})]}),n&&t.jsx(me,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:()=>n(u.id),children:t.jsx(Mt,{className:"h-4 w-4"})})]})},u.id))})})})]})},mi=({data:e,columns:s,onDataCleaned:n})=>{const[r,a]=l.useState(new Set),[i,o]=l.useState(!1),[c,f]=l.useState(e),x=l.useMemo(()=>{const y=[];return s.forEach(d=>{var ae;const w=c.map(R=>R[d]),M=w.filter(R=>R==null||R===""||R==="null"||R==="NULL").length,q=w.length;if(M>0){const R=M/q*100,U=w.filter(re=>typeof re=="number"&&!isNaN(re));if(U.length>q*.5&&U.length>0){const re=U.sort((p,D)=>p-D)[Math.floor(U.length/2)],g=U.reduce((p,D)=>p+D,0)/U.length;y.push({id:`missing-median-${d}`,column:d,issue:"Missing Values",severity:R>20?"critical":R>5?"warning":"info",description:`${M} missing values (${R.toFixed(1)}%)`,fix:`Fill with median (${re.toFixed(2)})`,affectedRows:M,action:()=>c.map(p=>({...p,[d]:p[d]===null||p[d]===void 0||p[d]===""||p[d]==="null"||p[d]==="NULL"?re:p[d]}))}),y.push({id:`missing-mean-${d}`,column:d,issue:"Missing Values",severity:R>20?"critical":R>5?"warning":"info",description:`${M} missing values (${R.toFixed(1)}%)`,fix:`Fill with mean (${g.toFixed(2)})`,affectedRows:M,action:()=>c.map(p=>({...p,[d]:p[d]===null||p[d]===void 0||p[d]===""||p[d]==="null"||p[d]==="NULL"?g:p[d]}))})}else{const re={};w.forEach(p=>{if(p!=null&&p!==""&&p!=="null"&&p!=="NULL"){const D=String(p);re[D]=(re[D]||0)+1}});const g=(ae=Object.entries(re).sort((p,D)=>D[1]-p[1])[0])==null?void 0:ae[0];g&&y.push({id:`missing-mode-${d}`,column:d,issue:"Missing Values",severity:R>20?"critical":R>5?"warning":"info",description:`${M} missing values (${R.toFixed(1)}%)`,fix:`Fill with mode ("${g.substring(0,20)}${g.length>20?"...":""}")`,affectedRows:M,action:()=>c.map(p=>({...p,[d]:p[d]===null||p[d]===void 0||p[d]===""||p[d]==="null"||p[d]==="NULL"?g:p[d]}))})}y.push({id:`missing-remove-${d}`,column:d,issue:"Missing Values",severity:R>20?"critical":R>5?"warning":"info",description:`${M} missing values (${R.toFixed(1)}%)`,fix:"Remove rows with missing values",affectedRows:M,action:()=>c.filter(re=>!(re[d]===null||re[d]===void 0||re[d]===""||re[d]==="null"||re[d]==="NULL"))})}const V=w.filter(R=>typeof R=="number"&&!isNaN(R));if(V.length>10){const R=[...V].sort(($,E)=>$-E),U=R[Math.floor(R.length*.25)],ie=R[Math.floor(R.length*.75)],re=ie-U,g=U-1.5*re,p=ie+1.5*re,D=V.filter($=>$<g||$>p);if(D.length>0){const $=R[Math.floor(R.length/2)];y.push({id:`outlier-cap-${d}`,column:d,issue:"Outliers Detected",severity:D.length>q*.1?"warning":"info",description:`${D.length} outliers outside IQR bounds`,fix:`Cap to bounds (${g.toFixed(2)} - ${p.toFixed(2)})`,affectedRows:D.length,action:()=>c.map(E=>{const F=E[d];return typeof F=="number"?{...E,[d]:Math.max(g,Math.min(p,F))}:E})}),y.push({id:`outlier-median-${d}`,column:d,issue:"Outliers Detected",severity:D.length>q*.1?"warning":"info",description:`${D.length} outliers outside IQR bounds`,fix:`Replace with median (${$.toFixed(2)})`,affectedRows:D.length,action:()=>c.map(E=>{const F=E[d];return typeof F=="number"&&(F<g||F>p)?{...E,[d]:$}:E})}),y.push({id:`outlier-remove-${d}`,column:d,issue:"Outliers Detected",severity:D.length>q*.1?"warning":"info",description:`${D.length} outliers outside IQR bounds`,fix:"Remove outlier rows",affectedRows:D.length,action:()=>c.filter(E=>{const F=E[d];return typeof F=="number"?F>=g&&F<=p:!0})})}}const H=w.filter(R=>typeof R=="string"),X=H.filter(R=>R!==R.trim()||R.includes("  "));X.length>0&&y.push({id:`whitespace-${d}`,column:d,issue:"Whitespace Issues",severity:"info",description:`${X.length} values with extra whitespace`,fix:"Trim and normalize whitespace",affectedRows:X.length,action:()=>c.map(R=>{const U=R[d];return typeof U=="string"?{...R,[d]:U.trim().replace(/\s+/g," ")}:R})});const ne=[...new Set(H.map(R=>R.toLowerCase()))].filter(R=>{const U=H.filter(ie=>ie.toLowerCase()===R);return new Set(U).size>1});if(ne.length>0&&(y.push({id:`casing-title-${d}`,column:d,issue:"Inconsistent Casing",severity:"info",description:`${ne.length} values with casing variations`,fix:"Convert to Title Case",affectedRows:H.length,action:()=>c.map(R=>{const U=R[d];return typeof U=="string"?{...R,[d]:U.toLowerCase().replace(/\b\w/g,ie=>ie.toUpperCase())}:R})}),y.push({id:`casing-lower-${d}`,column:d,issue:"Inconsistent Casing",severity:"info",description:`${ne.length} values with casing variations`,fix:"Convert to lowercase",affectedRows:H.length,action:()=>c.map(R=>{const U=R[d];return typeof U=="string"?{...R,[d]:U.toLowerCase()}:R})})),d===s[0]){const R=new Set;let U=0;c.forEach(ie=>{const re=JSON.stringify(ie);R.has(re)?U++:R.add(re)}),U>0&&y.push({id:"duplicates",column:"All Columns",issue:"Duplicate Rows",severity:U>q*.1?"warning":"info",description:`${U} duplicate rows detected`,fix:"Remove duplicate rows",affectedRows:U,action:()=>{const ie=new Set;return c.filter(re=>{const g=JSON.stringify(re);return ie.has(g)?!1:(ie.add(g),!0)})}})}}),y},[c,s]),v=y=>{try{const d=y.action();f(d),n(d),a(w=>new Set([...w,y.id])),$e.success(`Applied: ${y.fix}`,{description:`${y.affectedRows} rows affected`})}catch(d){$e.error("Failed to apply fix"),console.error(d)}},u=async()=>{o(!0);const y=x.filter(M=>M.severity==="critical"&&!r.has(M.id)),d=new Set;let w=0;for(const M of y)if(!d.has(M.column))try{const q=M.action();f(q),n(q),a(V=>new Set([...V,M.id])),d.add(M.column),w++,await new Promise(V=>setTimeout(V,100))}catch(q){console.error(q)}o(!1),w>0?$e.success(`Applied ${w} critical fixes`):$e.info("No critical fixes to apply")},N=y=>{switch(y){case"critical":return"bg-destructive/20 text-destructive border-destructive/30";case"warning":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-blue-500/20 text-blue-400 border-blue-500/30"}},m=y=>{switch(y){case"Missing Values":return t.jsx(Mt,{className:"w-4 h-4"});case"Outliers Detected":return t.jsx(pr,{className:"w-4 h-4"});case"Whitespace Issues":return t.jsx(zt,{className:"w-4 h-4"});case"Inconsistent Casing":return t.jsx(zt,{className:"w-4 h-4"});case"Duplicate Rows":return t.jsx(Js,{className:"w-4 h-4"});default:return t.jsx(Tt,{className:"w-4 h-4"})}},P=x.filter(y=>y.severity==="critical"&&!r.has(y.id)).length,O=x.filter(y=>y.severity==="warning"&&!r.has(y.id)).length,j=l.useMemo(()=>{const y={};return x.forEach(d=>{const w=`${d.column}-${d.issue}`;y[w]||(y[w]=[]),y[w].push(d)}),y},[x]);return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:t.jsx(vt,{className:"w-5 h-5 text-primary"})}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold",children:"Auto-Cleaning Suggestions"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:[x.length," suggestions  ",r.size," applied"]})]})]}),P>0&&t.jsxs(me,{onClick:u,disabled:i,className:"gap-2",variant:"destructive",children:[i?t.jsx(at,{className:"w-4 h-4 animate-spin"}):t.jsx(vt,{className:"w-4 h-4"}),"Fix All Critical (",P,")"]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.jsx(ge,{className:"bg-destructive/10 border-destructive/30",children:t.jsxs(we,{className:"p-3 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-destructive",children:P}),t.jsx("div",{className:"text-xs text-destructive/80",children:"Critical Issues"})]})}),t.jsx(ge,{className:"bg-yellow-500/10 border-yellow-500/30",children:t.jsxs(we,{className:"p-3 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:O}),t.jsx("div",{className:"text-xs text-yellow-400/80",children:"Warnings"})]})}),t.jsx(ge,{className:"bg-green-500/10 border-green-500/30",children:t.jsxs(we,{className:"p-3 text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.size}),t.jsx("div",{className:"text-xs text-green-400/80",children:"Fixes Applied"})]})})]}),t.jsx(Je,{className:"h-[400px]",children:t.jsxs("div",{className:"space-y-4 pr-4",children:[Object.entries(j).map(([y,d])=>t.jsxs(ge,{className:"bg-card/50 border-border/50",children:[t.jsxs(et,{className:"pb-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[m(d[0].issue),t.jsxs(tt,{className:"text-sm font-medium",children:[d[0].column,": ",d[0].issue]})]}),t.jsx(pe,{className:N(d[0].severity),children:d[0].severity})]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:d[0].description})]}),t.jsx(we,{className:"pt-0",children:t.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(w=>t.jsxs(me,{size:"sm",variant:r.has(w.id)?"secondary":"outline",onClick:()=>v(w),disabled:r.has(w.id),className:"gap-1.5 text-xs h-7",children:[r.has(w.id)?t.jsx(Ze,{className:"w-3 h-3 text-green-500"}):t.jsx(vt,{className:"w-3 h-3"}),w.fix]},w.id))})})]},y)),x.length===0&&t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(Ze,{className:"w-12 h-12 mx-auto mb-3 text-green-500/50"}),t.jsx("p",{className:"font-medium",children:"No issues detected!"}),t.jsx("p",{className:"text-sm",children:"Your data looks clean and ready to use."})]})]})})]})},fi=({data:e,columns:s,columnTypes:n,datasetName:r,onChartSuggestion:a,onDataCleaned:i})=>{const[o,c]=l.useState(!1),[f,x]=l.useState(0),[v,u]=l.useState([]),[N,m]=l.useState([]),[P,O]=l.useState([]),[j,y]=l.useState([]),[d,w]=l.useState(!1),[M,q]=l.useState("columns"),V=l.useCallback(g=>{const p=e.map(W=>W[g]).filter(W=>W!=null&&W!=="");if(p.length===0)return"mixed";const D=Math.min(p.length,100),$=p.slice(0,D);let E=0,F=0,k=0;$.forEach(W=>{const Y=String(W).toLowerCase();!isNaN(Number(W))&&Y!==""&&E++,(Y==="true"||Y==="false"||Y==="yes"||Y==="no"||Y==="1"||Y==="0")&&k++,Date.parse(String(W))&&String(W).match(/\d{4}[-/]\d{2}[-/]\d{2}|\d{2}[-/]\d{2}[-/]\d{4}/)&&F++});const T=D*.8;if(E>=T)return"numeric";if(F>=T)return"date";if(k>=T)return"boolean";const S=new Set($.map(W=>String(W)));return S.size<=D*.5&&S.size<=50?"categorical":"text"},[e]),H=l.useCallback(g=>{const p=e.map(T=>T[g]),D=p.filter(T=>T!=null&&T!==""),$=new Set(D.map(T=>String(T))),E=V(g),F={name:g,type:E,detectedType:E,nullCount:p.length-D.length,nullPercentage:(p.length-D.length)/p.length*100,uniqueCount:$.size,uniquePercentage:$.size/D.length*100,quality:"good",qualityScore:100};if(E==="numeric"){const T=D.map(S=>Number(S)).filter(S=>!isNaN(S));if(T.length>0){F.min=Math.min(...T),F.max=Math.max(...T),F.mean=T.reduce((de,ue)=>de+ue,0)/T.length;const S=[...T].sort((de,ue)=>de-ue),W=Math.floor(S.length/2);F.median=S.length%2!==0?S[W]:(S[W-1]+S[W])/2;const Y=T.map(de=>Math.pow(de-F.mean,2));F.stdDev=Math.sqrt(Y.reduce((de,ue)=>de+ue,0)/T.length)}}if(E==="categorical"||E==="text"){const T={};D.forEach(S=>{const W=String(S);T[W]=(T[W]||0)+1}),F.topValues=Object.entries(T).sort((S,W)=>W[1]-S[1]).slice(0,5).map(([S,W])=>({value:S,count:W}))}let k=100;return F.nullPercentage>50?k-=40:F.nullPercentage>20?k-=20:F.nullPercentage>5&&(k-=10),F.uniquePercentage>95&&E!=="text"&&(k-=10),F.qualityScore=Math.max(0,k),F.quality=k>=80?"excellent":k>=60?"good":k>=40?"fair":"poor",F},[e,V]);l.useCallback(()=>{const g=s.filter(D=>{var $;return(($=v.find(E=>E.name===D))==null?void 0:$.type)==="numeric"}),p=[];for(let D=0;D<g.length;D++)for(let $=D+1;$<g.length;$++){const E=g[D],F=g[$],k=[],T=[];if(e.forEach(he=>{const h=Number(he[E]),b=Number(he[F]);!isNaN(h)&&!isNaN(b)&&(k.push(h),T.push(b))}),k.length<3)continue;const S=k.reduce((he,h)=>he+h,0)/k.length,W=T.reduce((he,h)=>he+h,0)/T.length;let Y=0,de=0,ue=0;for(let he=0;he<k.length;he++){const h=k[he]-S,b=T[he]-W;Y+=h*b,de+=h*h,ue+=b*b}const xe=de===0||ue===0?0:Y/Math.sqrt(de*ue),J=Math.abs(xe);p.push({column1:E,column2:F,coefficient:xe,strength:J>=.7?"strong":J>=.4?"moderate":J>=.2?"weak":"none",direction:xe>.1?"positive":xe<-.1?"negative":"none"})}return p.sort((D,$)=>Math.abs($.coefficient)-Math.abs(D.coefficient))},[s,v,e]),l.useCallback(()=>{var k,T;const g=[],p=v.filter(S=>S.type==="numeric"),D=v.filter(S=>S.type==="categorical"),$=v.filter(S=>S.type==="date");if(D.length>0&&p.length>0){const S=D[0],W=p[0];g.push({type:"bar",title:`${W.name} by ${S.name}`,description:`Compare ${W.name} values across different ${S.name} categories`,columns:[S.name,W.name],confidence:.9,reason:`${S.name} has ${S.uniqueCount} categories - perfect for bar chart comparison`})}$.length>0&&p.length>0&&g.push({type:"line",title:`${p[0].name} Over Time`,description:`Track ${p[0].name} trends over the date range`,columns:[$[0].name,p[0].name],confidence:.95,reason:"Time series data detected - line chart shows trends effectively"});const E=N.filter(S=>S.strength==="strong");if(E.length>0){const S=E[0];g.push({type:"scatter",title:`${S.column1} vs ${S.column2}`,description:`Explore the ${S.direction} correlation (r=${S.coefficient.toFixed(2)})`,columns:[S.column1,S.column2],confidence:.85,reason:`Strong ${S.direction} correlation detected (${S.coefficient.toFixed(2)})`})}const F=D.find(S=>S.uniqueCount<=8);if(F&&g.push({type:"pie",title:`${F.name} Distribution`,description:`Show the proportion of each ${F.name} category`,columns:[F.name],confidence:.8,reason:`Only ${F.uniqueCount} categories - ideal for pie chart`}),p.length>0){const S=p[0];g.push({type:"histogram",title:`${S.name} Distribution`,description:`Analyze the frequency distribution of ${S.name}`,columns:[S.name],confidence:.75,reason:`Show how ${S.name} values are distributed (range: ${(k=S.min)==null?void 0:k.toFixed(1)} - ${(T=S.max)==null?void 0:T.toFixed(1)})`})}return g.sort((S,W)=>W.confidence-S.confidence)},[v,N]);const X=l.useCallback(async()=>{w(!0);try{const g={datasetName:r,rowCount:e.length,columnCount:s.length,columns:v.map(k=>{var T,S;return{name:k.name,type:k.type,nullPercentage:k.nullPercentage.toFixed(1),uniqueCount:k.uniqueCount,quality:k.quality,...k.type==="numeric"&&{min:k.min,max:k.max,mean:(T=k.mean)==null?void 0:T.toFixed(2),stdDev:(S=k.stdDev)==null?void 0:S.toFixed(2)}}}),topCorrelations:N.slice(0,5).map(k=>({columns:`${k.column1} & ${k.column2}`,coefficient:k.coefficient.toFixed(2),strength:k.strength})),chartSuggestions:P.slice(0,3).map(k=>k.title)},{data:p,error:D}=await Tn.functions.invoke("data-agent",{body:{action:"nlp-query",data:e.slice(0,50),query:`Analyze this dataset profile and provide 3-5 key insights. Focus on: data quality issues, interesting patterns, correlations, and actionable recommendations. Dataset summary: ${JSON.stringify(g)}`,context:{columns:s,columnTypes:n,datasetName:r}}});if(D)throw D;const $=p.response||p.answer||"",E=[];$.split(/\n+/).filter(k=>k.trim()).forEach((k,T)=>{if(k.trim().length>20){let S="insight",W="medium";const Y=k.toLowerCase();Y.includes("warning")||Y.includes("issue")||Y.includes("missing")?(S="warning",W="high"):Y.includes("recommend")||Y.includes("suggest")||Y.includes("consider")?S="recommendation":(Y.includes("pattern")||Y.includes("trend")||Y.includes("correlation"))&&(S="pattern"),E.push({title:`Insight ${T+1}`,content:k.replace(/^[\d\.\-\*]+\s*/,"").trim(),type:S,priority:W})}}),y(E.slice(0,5)),$e.success("AI insights generated successfully")}catch(g){console.error("Error generating insights:",g);const p=[],D=v.filter(E=>E.quality==="poor"||E.quality==="fair");D.length>0&&p.push({title:"Data Quality Alert",content:`${D.length} column(s) have quality concerns: ${D.map(E=>E.name).join(", ")}. Consider cleaning these before analysis.`,type:"warning",priority:"high"});const $=N.filter(E=>E.strength==="strong");$.length>0&&p.push({title:"Strong Correlations Found",content:`Found ${$.length} strong correlation(s). Strongest: ${$[0].column1} & ${$[0].column2} (r=${$[0].coefficient.toFixed(2)}).`,type:"pattern",priority:"medium"}),P.length>0&&p.push({title:"Recommended Visualization",content:`Based on your data structure, a ${P[0].type} chart would be most effective: "${P[0].title}".`,type:"recommendation",priority:"medium"}),y(p)}finally{w(!1)}},[e,s,n,r,v,N,P]),le=l.useCallback(async()=>{c(!0),x(0);const g=[];for(let $=0;$<s.length;$++)g.push(H(s[$])),x(($+1)/s.length*50),await new Promise(E=>setTimeout(E,50));u(g),x(60),await new Promise($=>setTimeout($,100));const p=ne(g);m(p),x(80);const D=ae(g,p);O(D),x(100),c(!1),$e.success(`Profiled ${s.length} columns with ${e.length.toLocaleString()} rows`)},[s,H,e.length]),ne=g=>{const p=s.filter($=>{var E;return((E=g.find(F=>F.name===$))==null?void 0:E.type)==="numeric"}),D=[];for(let $=0;$<p.length;$++)for(let E=$+1;E<p.length;E++){const F=p[$],k=p[E],T=[],S=[];if(e.forEach(h=>{const b=Number(h[F]),z=Number(h[k]);!isNaN(b)&&!isNaN(z)&&(T.push(b),S.push(z))}),T.length<3)continue;const W=T.reduce((h,b)=>h+b,0)/T.length,Y=S.reduce((h,b)=>h+b,0)/S.length;let de=0,ue=0,xe=0;for(let h=0;h<T.length;h++){const b=T[h]-W,z=S[h]-Y;de+=b*z,ue+=b*b,xe+=z*z}const J=ue===0||xe===0?0:de/Math.sqrt(ue*xe),he=Math.abs(J);D.push({column1:F,column2:k,coefficient:J,strength:he>=.7?"strong":he>=.4?"moderate":he>=.2?"weak":"none",direction:J>.1?"positive":J<-.1?"negative":"none"})}return D.sort(($,E)=>Math.abs(E.coefficient)-Math.abs($.coefficient))},ae=(g,p)=>{const D=[],$=g.filter(T=>T.type==="numeric"),E=g.filter(T=>T.type==="categorical"),F=g.filter(T=>T.type==="date");E.length>0&&$.length>0&&D.push({type:"bar",title:`${$[0].name} by ${E[0].name}`,description:"Compare values across categories",columns:[E[0].name,$[0].name],confidence:.9,reason:`${E[0].uniqueCount} categories detected`}),F.length>0&&$.length>0&&D.push({type:"line",title:`${$[0].name} Over Time`,description:"Track trends over time",columns:[F[0].name,$[0].name],confidence:.95,reason:"Time series data detected"});const k=p.filter(T=>T.strength==="strong");return k.length>0&&D.push({type:"scatter",title:`${k[0].column1} vs ${k[0].column2}`,description:"Correlation analysis",columns:[k[0].column1,k[0].column2],confidence:.85,reason:`Strong correlation (${k[0].coefficient.toFixed(2)})`}),D},R=g=>{switch(g){case"numeric":return t.jsx(os,{className:"h-4 w-4"});case"categorical":return t.jsx(zt,{className:"h-4 w-4"});case"date":return t.jsx(_s,{className:"h-4 w-4"});default:return t.jsx(Ds,{className:"h-4 w-4"})}},U=g=>{switch(g){case"excellent":return"text-green-500 bg-green-500/10";case"good":return"text-blue-500 bg-blue-500/10";case"fair":return"text-yellow-500 bg-yellow-500/10";case"poor":return"text-red-500 bg-red-500/10"}},ie=g=>{switch(g){case"warning":return t.jsx(Tt,{className:"h-4 w-4 text-yellow-500"});case"recommendation":return t.jsx(On,{className:"h-4 w-4 text-blue-500"});case"pattern":return t.jsx(Pt,{className:"h-4 w-4 text-green-500"});default:return t.jsx(xt,{className:"h-4 w-4 text-purple-500"})}},re=g=>{switch(g){case"bar":return t.jsx(pt,{className:"h-4 w-4"});case"line":return t.jsx(ur,{className:"h-4 w-4"});case"pie":return t.jsx(Ln,{className:"h-4 w-4"});case"scatter":return t.jsx(tr,{className:"h-4 w-4"});default:return t.jsx(pt,{className:"h-4 w-4"})}};return t.jsxs(ge,{className:"bg-gradient-to-br from-indigo-500/10 via-purple-500/5 to-transparent border-indigo-500/30",children:[t.jsxs(et,{children:[t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 shadow-lg shadow-indigo-500/25",children:t.jsx(Ws,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsxs(tt,{className:"text-xl flex items-center gap-2",children:["Real-Time Data Profiling",t.jsxs(pe,{variant:"secondary",className:"text-xs bg-indigo-500/10 text-indigo-600",children:[t.jsx(as,{className:"h-3 w-3 mr-1"}),"AI-Powered"]})]}),t.jsx(It,{className:"mt-1",children:"Automatic column detection, correlation analysis & smart chart recommendations"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs(me,{variant:"outline",size:"sm",onClick:X,disabled:d||v.length===0,className:"gap-2",children:[d?t.jsx(at,{className:"h-4 w-4 animate-spin"}):t.jsx(xt,{className:"h-4 w-4"}),"Generate Insights"]}),t.jsx(me,{onClick:le,disabled:o,className:"bg-gradient-to-r from-indigo-500 to-purple-600 gap-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx(at,{className:"h-4 w-4 animate-spin"}),"Profiling..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Js,{className:"h-4 w-4"}),"Run Profile"]})})]})]}),o&&t.jsxs("div",{className:"mt-4 space-y-2",children:[t.jsx(Lt,{value:f,className:"h-2"}),t.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Analyzing ",s.length," columns..."]})]})]}),v.length>0&&t.jsx(we,{children:t.jsxs(zn,{value:M,onValueChange:q,children:[t.jsxs(Pn,{className:"grid grid-cols-6 w-full max-w-2xl mb-4",children:[t.jsxs(Ye,{value:"columns",className:"gap-1",children:[t.jsx(Ds,{className:"h-3 w-3"}),"Columns"]}),t.jsxs(Ye,{value:"correlations",className:"gap-1",children:[t.jsx(At,{className:"h-3 w-3"}),"Correlations"]}),t.jsxs(Ye,{value:"heatmap",className:"gap-1",children:[t.jsx(Ot,{className:"h-3 w-3"}),"Heatmap"]}),t.jsxs(Ye,{value:"quality",className:"gap-1",children:[t.jsx(Zs,{className:"h-3 w-3"}),"Quality"]}),t.jsxs(Ye,{value:"charts",className:"gap-1",children:[t.jsx(pt,{className:"h-3 w-3"}),"Charts"]}),t.jsxs(Ye,{value:"cleaning",className:"gap-1",children:[t.jsx(vt,{className:"h-3 w-3"}),"Cleaning"]}),t.jsxs(Ye,{value:"insights",className:"gap-1",children:[t.jsx(xt,{className:"h-3 w-3"}),"AI"]})]}),t.jsx(Qe,{value:"columns",children:t.jsx(Je,{className:"h-[400px]",children:t.jsx("div",{className:"space-y-3",children:v.map(g=>{var p,D,$,E;return t.jsxs(ge,{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-lg ${U(g.quality)}`,children:R(g.type)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-sm",children:g.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(pe,{variant:"outline",className:"text-xs",children:g.type}),t.jsxs(pe,{className:`text-xs ${U(g.quality)}`,children:[g.quality," (",g.qualityScore,"%)"]})]})]})]}),t.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[t.jsxs("p",{children:[g.uniqueCount.toLocaleString()," unique"]}),t.jsxs("p",{children:[g.nullPercentage.toFixed(1),"% null"]})]})]}),g.type==="numeric"&&g.mean!==void 0&&t.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-3 pt-3 border-t",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Min"}),t.jsx("p",{className:"text-sm font-medium",children:(p=g.min)==null?void 0:p.toFixed(2)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Max"}),t.jsx("p",{className:"text-sm font-medium",children:(D=g.max)==null?void 0:D.toFixed(2)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Mean"}),t.jsx("p",{className:"text-sm font-medium",children:($=g.mean)==null?void 0:$.toFixed(2)})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xs text-muted-foreground",children:"Std Dev"}),t.jsx("p",{className:"text-sm font-medium",children:(E=g.stdDev)==null?void 0:E.toFixed(2)})]})]}),g.topValues&&g.topValues.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-3 pt-3 border-t",children:g.topValues.map(F=>t.jsxs(pe,{variant:"secondary",className:"text-xs",children:[F.value," (",F.count,")"]},F.value))})]},g.name)})})})}),t.jsx(Qe,{value:"correlations",children:t.jsx(Je,{className:"h-[400px]",children:N.length===0?t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(At,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"No numeric column pairs found for correlation analysis"})]}):t.jsx("div",{className:"space-y-2",children:N.map((g,p)=>t.jsxs(ge,{className:"p-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[g.direction==="positive"?t.jsx(Pt,{className:"h-4 w-4 text-green-500"}):g.direction==="negative"?t.jsx(Ht,{className:"h-4 w-4 text-red-500"}):t.jsx(At,{className:"h-4 w-4 text-muted-foreground"}),t.jsxs("span",{className:"text-sm font-medium",children:[g.column1,"  ",g.column2]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pe,{variant:g.strength==="strong"?"default":g.strength==="moderate"?"secondary":"outline",children:g.strength}),t.jsxs("span",{className:`text-sm font-mono ${g.coefficient>0?"text-green-500":g.coefficient<0?"text-red-500":"text-muted-foreground"}`,children:["r = ",g.coefficient.toFixed(3)]})]})]}),t.jsx(Lt,{value:Math.abs(g.coefficient)*100,className:"h-1 mt-2"})]},p))})})}),t.jsx(Qe,{value:"heatmap",children:t.jsx(ui,{correlations:N,numericColumns:s.filter(g=>{var p;return((p=v.find(D=>D.name===g))==null?void 0:p.type)==="numeric"})})}),t.jsx(Qe,{value:"quality",children:t.jsx(hi,{columnProfiles:v,data:e})}),t.jsx(Qe,{value:"charts",children:t.jsx(Je,{className:"h-[400px]",children:P.length===0?t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(pt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"Run profiling to generate chart suggestions"})]}):t.jsx("div",{className:"space-y-3",children:P.map((g,p)=>t.jsx(ge,{className:"p-4 cursor-pointer hover:shadow-lg hover:border-primary transition-all",onClick:()=>a==null?void 0:a(g),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-primary/10 text-primary",children:re(g.type)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"font-semibold text-sm",children:g.title}),t.jsxs(pe,{variant:"secondary",className:"text-xs",children:[Math.round(g.confidence*100),"% match"]})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:g.description}),t.jsx("p",{className:"text-xs text-primary mt-2",children:g.reason})]})]})},p))})})}),t.jsx(Qe,{value:"cleaning",children:t.jsx(mi,{data:e,columns:s,onDataCleaned:g=>i==null?void 0:i(g)})}),t.jsx(Qe,{value:"insights",children:t.jsx(Je,{className:"h-[400px]",children:j.length===0?t.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[t.jsx(xt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:'Click "Generate Insights" to get AI-powered analysis'})]}):t.jsx("div",{className:"space-y-3",children:j.map((g,p)=>t.jsx(ge,{className:`p-4 ${g.priority==="high"?"border-yellow-500/50 bg-yellow-500/5":""}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[ie(g.type),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pe,{variant:g.type==="warning"?"destructive":"secondary",className:"text-xs",children:g.type}),g.priority==="high"&&t.jsx(pe,{variant:"outline",className:"text-xs text-yellow-600",children:"High Priority"})]}),t.jsx("p",{className:"text-sm mt-2",children:g.content})]})]})},p))})})})]})})]})},gi=[{id:"executive-summary",name:"Executive Summary",description:"High-level KPIs with trend analysis for C-suite presentations",icon:mr,tileTypes:["kpi","line","bar","gauge"],color:"from-slate-600 to-slate-800",category:"business"},{id:"sales-performance",name:"Sales Performance",description:"Revenue tracking, conversion funnels, and sales metrics",icon:nr,tileTypes:["kpi","bar","funnel","line","pie"],color:"from-emerald-500 to-teal-600",category:"sales"},{id:"marketing-analytics",name:"Marketing Analytics",description:"Campaign performance, audience insights, and engagement metrics",icon:fr,tileTypes:["kpi","area","pie","bar","scatter"],color:"from-purple-500 to-pink-600",category:"marketing"},{id:"hr-dashboard",name:"HR & People",description:"Employee metrics, headcount, and workforce analytics",icon:Xn,tileTypes:["kpi","bar","pie","histogram","boxplot"],color:"from-blue-500 to-indigo-600",category:"hr"},{id:"financial-overview",name:"Financial Overview",description:"P&L analysis, budget tracking, and financial KPIs",icon:gr,tileTypes:["kpi","waterfall","bar","line","combo"],color:"from-amber-500 to-orange-600",category:"finance"},{id:"operations-metrics",name:"Operations Metrics",description:"Efficiency tracking, process metrics, and operational KPIs",icon:Xs,tileTypes:["kpi","gauge","line","histogram","scatter"],color:"from-cyan-500 to-blue-600",category:"operations"},{id:"ecommerce-analytics",name:"E-Commerce Analytics",description:"Order tracking, customer behavior, and product performance",icon:wr,tileTypes:["kpi","bar","line","pie","funnel","treemap"],color:"from-rose-500 to-red-600",category:"sales"},{id:"customer-insights",name:"Customer Insights",description:"Customer segmentation, satisfaction, and behavior analysis",icon:Yn,tileTypes:["kpi","pie","scatter","bar","boxplot"],color:"from-pink-500 to-rose-600",category:"marketing"},{id:"research-analysis",name:"Research & Analysis",description:"Statistical analysis, distributions, and data exploration",icon:xr,tileTypes:["histogram","scatter","boxplot","line","bar","kpi"],color:"from-green-500 to-emerald-600",category:"custom"},{id:"comprehensive",name:"Comprehensive Dashboard",description:"All chart types for complete data visualization",icon:ls,tileTypes:["kpi","bar","line","pie","area","scatter","combo","gauge","treemap","funnel","waterfall","histogram","boxplot"],color:"from-cyan-500 to-teal-600",category:"custom"}],Ti=({data:e,columns:s,columnTypes:n,datasetName:r})=>{const[a,i]=l.useState([]),[o,c]=l.useState(!1),[f,x]=l.useState("grid"),[v,u]=l.useState("colorful"),[N,m]=l.useState(!1),[P,O]=l.useState(null),[j,y]=l.useState(!1),[d,w]=l.useState(s),[M,q]=l.useState([]),[V,H]=l.useState(e),[X,le]=l.useState(!1),[ne,ae]=l.useState(null),[R,U]=l.useState(!1),[ie,re]=l.useState(!1),[g,p]=l.useState(null),{exportToPdf:D}=Fn(),$=Fr(Ts(js,{activationConstraint:{distance:8}}),Ts(ys,{coordinateGetter:li})),E=l.useMemo(()=>s.filter(h=>n[h]==="numeric"),[s,n]),F=l.useMemo(()=>s.filter(h=>n[h]==="categorical"),[s,n]),k=l.useCallback(h=>{const{active:b,over:z}=h;p(null),z&&b.id!==z.id&&(i(C=>{const Q=C.findIndex(te=>te.id===b.id),Ne=C.findIndex(te=>te.id===z.id);return ws(C,Q,Ne)}),$e.success("Tile reordered"))},[]),T=l.useCallback((h,b)=>{i(z=>z.map(C=>C.id===h?{...C,size:b}:C)),$e.success(`Tile resized to ${b}`)},[]),S=()=>{D({title:"Power BI Style Dashboard Report",subtitle:`Interactive Dashboard for ${r}`,datasetName:r,statistics:{"Total Records":e.length,"Dashboard Tiles":a.length,"Numeric Columns":E.length,"Categorical Columns":F.length},insights:a.filter(h=>h.type==="kpi").map(h=>{var b,z;return{title:h.title,description:`Value: ${((b=h.value)==null?void 0:b.toFixed(2))||"N/A"}, Change: ${((z=h.change)==null?void 0:z.toFixed(1))||0}%`,importance:(h.change||0)>0?"high":"medium"}}),sections:[{title:"Dashboard Overview",content:`This Power BI-style dashboard contains ${a.length} visualization tiles across ${E.length} numeric metrics.`,type:"text"},{title:"Visualizations",type:"list",content:a.map(h=>`${h.type.toUpperCase()}: ${h.title}`)}],recommendations:["Use slicers to filter data dynamically","Drill down into charts for detailed insights","Share this dashboard with stakeholders"]})},W=h=>{w(b=>b.includes(h)?b.filter(z=>z!==h):[...b,h])},Y=h=>{const b={id:`transform-${Date.now()}`,type:h,column:d[0]||s[0]};q(z=>[...z,b])},de=(h,b)=>{q(z=>z.map(C=>C.id===h?{...C,...b}:C))},ue=h=>{q(b=>b.filter(z=>z.id!==h))},xe=l.useCallback(()=>{le(!0),setTimeout(()=>{let h=[...e];h=h.map(b=>{const z={};return d.forEach(C=>{z[C]=b[C]}),z}),M.forEach(b=>{switch(b.type){case"filter":b.column&&b.operator&&b.value!==void 0&&(h=h.filter(z=>{const C=z[b.column],Q=b.value;switch(b.operator){case"equals":return String(C)===String(Q);case"contains":return String(C).toLowerCase().includes(String(Q).toLowerCase());case"greater":return Number(C)>Number(Q);case"less":return Number(C)<Number(Q);case"not_empty":return C!=null&&C!=="";default:return!0}}));break;case"sort":b.column&&h.sort((z,C)=>{const Q=z[b.column],Ne=C[b.column],te=String(Q).localeCompare(String(Ne),void 0,{numeric:!0});return b.direction==="desc"?-te:te});break;case"remove_nulls":b.column&&(h=h.filter(z=>z[b.column]!==null&&z[b.column]!==void 0&&z[b.column]!==""));break;case"normalize":if(b.column&&n[b.column]==="numeric"){const z=h.map(te=>Number(te[b.column])).filter(te=>!isNaN(te)),C=Math.min(...z),Ne=Math.max(...z)-C||1;h=h.map(te=>({...te,[b.column]:((Number(te[b.column])-C)/Ne).toFixed(4)}))}break}}),H(h),le(!1),$e.success(`Applied ${M.length} transformations to ${h.length} rows`)},1e3)},[e,d,M,n]),J=()=>{le(!0),setTimeout(()=>{let h=e.map(b=>{const z={};return d.forEach(C=>{let Q=b[C];typeof Q=="string"&&(Q=Q.trim()),Q===""&&(Q=null),z[C]=Q}),z});h=h.filter(b=>d.some(z=>b[z]!==null&&b[z]!==void 0)),H(h),le(!1),$e.success(`Auto-cleaned data: ${h.length} rows after removing empty rows`)},1500)},he=l.useCallback(h=>{c(!0);const b=V.length>0?V:e,z=d.length>0?d:s,C=z.filter(te=>n[te]==="numeric"),Q=z.filter(te=>n[te]==="categorical"),Ne=h||ne;setTimeout(()=>{const te=[],dt=(Ne==null?void 0:Ne.tileTypes)||["kpi","bar","line","pie","area","scatter","combo","gauge","treemap","funnel","waterfall","histogram","boxplot"],fe=I=>dt.includes(I);if(fe("kpi")&&C.slice(0,4).forEach((I,K)=>{const _=b.map(B=>Number(B[I])).filter(B=>!isNaN(B)),ee=_.reduce((B,Z)=>B+Z,0),G=_.length>0?ee/_.length:0,A=_.length>1?_.slice(0,-1).reduce((B,Z)=>B+Z,0)/(_.length-1):G,L=A!==0?(G-A)/A*100:0;te.push({id:`kpi-${I}`,type:"kpi",title:I,size:"small",column:I,value:G,change:L,color:oe[K%oe.length]})}),fe("bar")&&Q.length>0&&C.length>0){const I=Q[0],K=C[0],_=b.reduce((G,A)=>{const L=String(A[I]);G[L]||(G[L]=[]);const B=Number(A[K]);return isNaN(B)||G[L].push(B),G},{}),ee=Object.entries(_).slice(0,10).map(([G,A])=>({name:G,value:A.reduce((L,B)=>L+B,0)/A.length}));te.push({id:`bar-${I}-${K}`,type:"bar",title:`${K} by ${I}`,size:"large",xAxis:I,yAxis:K,data:ee,color:oe[0]})}if(fe("pie")&&Q.length>0){const I=Q[0],K=b.reduce((ee,G)=>{const A=String(G[I]);return ee[A]=(ee[A]||0)+1,ee},{}),_=Object.entries(K).slice(0,8).map(([ee,G])=>({name:ee,value:G}));te.push({id:`pie-${I}`,type:"pie",title:`${I} Distribution`,size:"medium",column:I,data:_})}if(fe("line")&&C.length>0){const I=C[0],K=b.slice(0,50).map((_,ee)=>({index:ee+1,value:Number(_[I])||0}));te.push({id:`line-${I}`,type:"line",title:`${I} Trend`,size:"large",column:I,data:K,color:oe[2]})}if(fe("area")&&C.length>1){const I=C[1],K=b.slice(0,50).map((_,ee)=>({index:ee+1,value:Number(_[I])||0}));te.push({id:`area-${I}`,type:"area",title:`${I} Analysis`,size:"medium",column:I,data:K,color:oe[4]})}if(fe("combo")&&C.length>=2&&Q.length>0){const I=Q[0],K=C[0],_=C[1],ee=b.reduce((A,L)=>{const B=String(L[I]);A[B]||(A[B]={v1:[],v2:[]});const Z=Number(L[K]),ce=Number(L[_]);return isNaN(Z)||A[B].v1.push(Z),isNaN(ce)||A[B].v2.push(ce),A},{}),G=Object.entries(ee).slice(0,8).map(([A,L])=>({name:A,[K]:L.v1.length>0?L.v1.reduce((B,Z)=>B+Z,0)/L.v1.length:0,[_]:L.v2.length>0?L.v2.reduce((B,Z)=>B+Z,0)/L.v2.length:0}));te.push({id:`combo-${I}`,type:"combo",title:`${K} vs ${_}`,size:"large",xAxis:I,yAxis:`${K}, ${_}`,data:G})}if(fe("scatter")&&C.length>=2){const I=C[0],K=C[1],_=b.slice(0,100).map(ee=>{var G,A;return{x:Number(ee[I])||0,y:Number(ee[K])||0,name:`(${(G=Number(ee[I]))==null?void 0:G.toFixed(1)}, ${(A=Number(ee[K]))==null?void 0:A.toFixed(1)})`}});te.push({id:`scatter-${I}-${K}`,type:"scatter",title:`${I} vs ${K} Correlation`,size:"medium",xAxis:I,yAxis:K,data:_,color:oe[5]})}if(fe("histogram")&&C.length>0){const I=C[Math.min(2,C.length-1)],K=b.map(Z=>Number(Z[I])).filter(Z=>!isNaN(Z)),_=Math.min(...K),ee=Math.max(...K),G=10,A=(ee-_)/G||1,L={};for(let Z=0;Z<G;Z++){const ce=_+Z*A,Ie=`${ce.toFixed(1)}-${(ce+A).toFixed(1)}`;L[Ie]=0}K.forEach(Z=>{const ce=Math.min(Math.floor((Z-_)/A),G-1),Ie=_+ce*A,Fe=`${Ie.toFixed(1)}-${(Ie+A).toFixed(1)}`;L[Fe]=(L[Fe]||0)+1});const B=Object.entries(L).map(([Z,ce])=>({name:Z,value:ce}));te.push({id:`histogram-${I}`,type:"histogram",title:`${I} Distribution`,size:"medium",column:I,data:B,color:oe[6]})}if(fe("gauge")&&C.length>0){const I=C[0],K=b.map(A=>Number(A[I])).filter(A=>!isNaN(A)),_=K.reduce((A,L)=>A+L,0)/K.length,ee=Math.max(...K),G=_/ee*100;te.push({id:`gauge-${I}`,type:"gauge",title:`${I} Performance`,size:"small",column:I,value:G,data:[{value:_,max:ee}],color:oe[7]})}if(fe("treemap")&&Q.length>=2&&C.length>0){const I=Q[0],K=Q[1],_=C[0],ee=b.reduce((A,L)=>{const B=String(L[I]),Z=String(L[K]);A[B]||(A[B]={});const ce=Number(L[_]);return isNaN(ce)||(A[B][Z]=(A[B][Z]||0)+ce),A},{}),G=Object.entries(ee).slice(0,6).flatMap(([A,L])=>Object.entries(L).slice(0,4).map(([B,Z])=>({name:`${A}/${B}`,value:Z})));te.push({id:`treemap-${I}-${K}`,type:"treemap",title:`${_} by ${I} & ${K}`,size:"large",data:G})}if(fe("funnel")&&Q.length>0&&C.length>0){const I=Q[Math.min(1,Q.length-1)]||Q[0],K=C[0],_=b.reduce((G,A)=>{const L=String(A[I]),B=Number(A[K]);return isNaN(B)||(G[L]=(G[L]||0)+B),G},{}),ee=Object.entries(_).sort((G,A)=>A[1]-G[1]).slice(0,6).map(([G,A])=>({name:G,value:A}));te.push({id:`funnel-${I}`,type:"funnel",title:`${K} Funnel by ${I}`,size:"medium",data:ee,color:oe[8]})}if(fe("waterfall")&&C.length>0&&Q.length>0){const I=Q[0],K=C[0],_=b.reduce((A,L)=>{const B=String(L[I]);A[B]||(A[B]=[]);const Z=Number(L[K]);return isNaN(Z)||A[B].push(Z),A},{});let ee=0;const G=Object.entries(_).slice(0,8).map(([A,L])=>{const B=L,Z=B.reduce((Ie,Fe)=>Ie+Fe,0)/B.length,ce=ee;return ee+=Z,{name:A,value:Z,start:ce,end:ee}});te.push({id:`waterfall-${I}`,type:"waterfall",title:`Cumulative ${K}`,size:"large",data:G,color:oe[9]})}if(fe("boxplot")&&C.length>0&&Q.length>0){const I=Q[0],K=C[0],_=b.reduce((G,A)=>{const L=String(A[I]);G[L]||(G[L]=[]);const B=Number(A[K]);return isNaN(B)||G[L].push(B),G},{}),ee=Object.entries(_).slice(0,6).map(([G,A])=>{const L=A.sort((Xt,ut)=>Xt-ut),B=L[Math.floor(L.length*.25)]||0,Z=L[Math.floor(L.length*.5)]||0,ce=L[Math.floor(L.length*.75)]||0,Ie=L[0]||0,Fe=L[L.length-1]||0;return{name:G,min:Ie,q1:B,median:Z,q3:ce,max:Fe}});te.push({id:`boxplot-${I}`,type:"boxplot",title:`${K} Stats by ${I}`,size:"medium",data:ee,color:oe[3]})}i(te),c(!1);const st=Ne?` with "${Ne.name}" template`:"";$e.success(`Generated ${te.length} dashboard tiles${st} using ${b.length} rows`)},2e3)},[e,V,d,s,n,ne]);return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx(ge,{className:"bg-gradient-to-br from-cyan-500/10 via-teal-500/5 to-transparent border-cyan-500/30",children:t.jsx(et,{className:"p-3 sm:p-6",children:t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx("div",{className:"p-2 sm:p-3 rounded-lg sm:rounded-xl bg-gradient-to-br from-cyan-500 to-teal-600 shadow-lg shadow-cyan-500/25",children:t.jsx(ks,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})}),t.jsxs("div",{children:[t.jsxs(tt,{className:"text-base sm:text-xl flex items-center gap-2 flex-wrap",children:[t.jsx("span",{className:"hidden xs:inline",children:"Power BI Style"}),t.jsx("span",{className:"xs:hidden",children:"Power BI"})," Dashboard",t.jsxs(pe,{variant:"secondary",className:"text-[10px] sm:text-xs bg-cyan-500/10 text-cyan-600",children:[t.jsx(xt,{className:"h-3 w-3 mr-1"}),"AI"]})]}),t.jsx(It,{className:"mt-0.5 sm:mt-1 text-xs sm:text-sm hidden sm:block",children:"Enterprise-grade visualizations with one-click generation"})]})]}),t.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto scrollbar-hide pb-1",children:[t.jsxs(me,{variant:ie?"default":"outline",size:"sm",onClick:()=>re(!ie),className:`shrink-0 text-xs sm:text-sm ${ie?"bg-gradient-to-r from-indigo-500 to-purple-600":""}`,children:[t.jsx(Ws,{className:"h-4 w-4 sm:mr-2"}),t.jsx("span",{className:"hidden sm:inline",children:"Data Profiling"})]}),t.jsxs(me,{variant:j?"default":"outline",size:"sm",onClick:()=>y(!j),className:`shrink-0 text-xs sm:text-sm ${j?"bg-gradient-to-r from-purple-500 to-pink-600":""}`,children:[t.jsx(Es,{className:"h-4 w-4 sm:mr-2"}),t.jsx("span",{className:"hidden sm:inline",children:"Edit Data"})]}),a.length>0&&t.jsxs(me,{variant:"outline",size:"sm",onClick:S,className:"gap-1 sm:gap-2 shrink-0 text-xs sm:text-sm",children:[t.jsx(qn,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),t.jsx(me,{variant:"outline",size:"sm",onClick:()=>x(f==="grid"?"list":"grid"),className:"shrink-0",children:f==="grid"?t.jsx(yr,{className:"h-4 w-4"}):t.jsx(Ot,{className:"h-4 w-4"})}),t.jsxs(me,{onClick:()=>U(!0),variant:"outline",size:"sm",className:"gap-1 sm:gap-2 shrink-0 text-xs sm:text-sm",children:[t.jsx(ls,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Templates"})]}),t.jsx(me,{onClick:()=>he(),disabled:o,size:"sm",className:"bg-gradient-to-r from-cyan-500 to-teal-600 shrink-0 text-xs sm:text-sm gap-1 sm:gap-2",children:o?t.jsxs(t.Fragment,{children:[t.jsx(at,{className:"h-4 w-4 animate-spin"}),t.jsx("span",{className:"hidden sm:inline",children:"Generating..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(as,{className:"h-4 w-4"}),t.jsx("span",{className:"hidden xs:inline",children:"Generate"})]})})]})]})})}),t.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[t.jsx(ge,{className:"bg-gradient-to-br from-cyan-500/5 to-transparent",children:t.jsxs(we,{className:"pt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-cyan-600",children:[t.jsx(Bn,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Total Tiles"})]}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:a.length})]})}),t.jsx(ge,{className:"bg-gradient-to-br from-teal-500/5 to-transparent",children:t.jsxs(we,{className:"pt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-teal-600",children:[t.jsx(pt,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Charts"})]}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(h=>h.type!=="kpi").length})]})}),t.jsx(ge,{className:"bg-gradient-to-br from-emerald-500/5 to-transparent",children:t.jsxs(we,{className:"pt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-emerald-600",children:[t.jsx(At,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"KPIs"})]}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:a.filter(h=>h.type==="kpi").length})]})}),t.jsx(ge,{className:"bg-gradient-to-br from-green-500/5 to-transparent",children:t.jsxs(we,{className:"pt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[t.jsx(Rs,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Data Points"})]}),t.jsx("p",{className:"text-2xl font-bold mt-1",children:e.length.toLocaleString()})]})})]}),ie&&t.jsx(fi,{data:V.length>0?V:e,columns:d.length>0?d:s,columnTypes:n,datasetName:r,onChartSuggestion:h=>{$e.success(`Chart suggestion: ${h.title}`)},onDataCleaned:h=>{H(h),$e.success(`Data cleaned: ${h.length} rows updated`)}}),j&&t.jsxs(ge,{className:"bg-gradient-to-br from-purple-500/10 via-pink-500/5 to-transparent border-purple-500/30",children:[t.jsx(et,{children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-purple-500 to-pink-600",children:t.jsx(Es,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{children:[t.jsx(tt,{className:"text-lg",children:"Data Editor"}),t.jsx(It,{children:"Select columns and apply transformations"})]})]}),t.jsx(me,{variant:"ghost",size:"icon",onClick:()=>y(!1),children:t.jsx($s,{className:"h-4 w-4"})})]})}),t.jsxs(we,{className:"space-y-6",children:[t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(Ms,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Ze,{className:"h-4 w-4 text-purple-500"}),"Select Columns"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(me,{variant:"outline",size:"sm",onClick:()=>w(s),children:"Select All"}),t.jsx(me,{variant:"outline",size:"sm",onClick:()=>w([]),children:"Clear"})]})]}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:s.map(h=>{var b;return t.jsxs("div",{onClick:()=>W(h),className:`flex items-center gap-2 p-2 rounded-lg border cursor-pointer transition-all ${d.includes(h)?"border-purple-500 bg-purple-500/10":"border-border hover:border-purple-500/50"}`,children:[t.jsx(Qn,{checked:d.includes(h),onCheckedChange:()=>W(h)}),t.jsx("span",{className:"text-xs truncate",children:h}),t.jsx(pe,{variant:"outline",className:"text-[10px] ml-auto",children:((b=n[h])==null?void 0:b.slice(0,3))||"str"})]},h)})}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.length," of ",s.length," columns selected"]})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(Ms,{className:"text-sm font-medium flex items-center gap-2",children:[t.jsx(Xs,{className:"h-4 w-4 text-purple-500"}),"Data Transformations"]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsxs(me,{variant:"outline",size:"sm",onClick:()=>Y("filter"),children:[t.jsx(sr,{className:"h-3 w-3 mr-1"}),"Filter"]}),t.jsxs(me,{variant:"outline",size:"sm",onClick:()=>Y("sort"),children:[t.jsx(Nr,{className:"h-3 w-3 mr-1"}),"Sort"]}),t.jsxs(me,{variant:"outline",size:"sm",onClick:()=>Y("remove_nulls"),children:[t.jsx(hr,{className:"h-3 w-3 mr-1"}),"Remove Nulls"]}),t.jsxs(me,{variant:"outline",size:"sm",onClick:()=>Y("normalize"),children:[t.jsx(Rs,{className:"h-3 w-3 mr-1"}),"Normalize"]})]}),M.length>0&&t.jsx("div",{className:"space-y-2 mt-4",children:M.map((h,b)=>{var z;return t.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-muted/50 flex-wrap",children:[t.jsxs(pe,{variant:"secondary",className:"text-xs",children:[b+1,". ",h.type]}),t.jsxs(Qt,{value:h.column,onValueChange:C=>de(h.id,{column:C}),children:[t.jsx(_t,{className:"w-32 h-8",children:t.jsx(Jt,{placeholder:"Column"})}),t.jsx(Zt,{children:d.map(C=>t.jsx(He,{value:C,children:C},C))})]}),h.type==="filter"&&t.jsxs(t.Fragment,{children:[t.jsxs(Qt,{value:h.operator,onValueChange:C=>de(h.id,{operator:C}),children:[t.jsx(_t,{className:"w-28 h-8",children:t.jsx(Jt,{placeholder:"Operator"})}),t.jsxs(Zt,{children:[t.jsx(He,{value:"equals",children:"Equals"}),t.jsx(He,{value:"contains",children:"Contains"}),t.jsx(He,{value:"greater",children:"Greater than"}),t.jsx(He,{value:"less",children:"Less than"}),t.jsx(He,{value:"not_empty",children:"Not empty"})]})]}),h.operator!=="not_empty"&&t.jsx(Vn,{className:"w-24 h-8",placeholder:"Value",value:((z=h.value)==null?void 0:z.toString())||"",onChange:C=>de(h.id,{value:C.target.value})})]}),h.type==="sort"&&t.jsxs(Qt,{value:h.direction||"asc",onValueChange:C=>de(h.id,{direction:C}),children:[t.jsx(_t,{className:"w-32 h-8",children:t.jsx(Jt,{})}),t.jsxs(Zt,{children:[t.jsx(He,{value:"asc",children:"Ascending"}),t.jsx(He,{value:"desc",children:"Descending"})]})]}),t.jsx(me,{variant:"ghost",size:"icon",className:"h-8 w-8 ml-auto",onClick:()=>ue(h.id),children:t.jsx($s,{className:"h-3 w-3"})})]},h.id)})})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 pt-4 border-t",children:[t.jsxs(me,{onClick:J,disabled:X,variant:"outline",className:"gap-2",children:[t.jsx(vt,{className:"h-4 w-4"}),"Auto Clean"]}),t.jsx(me,{onClick:xe,disabled:X||d.length===0,className:"bg-gradient-to-r from-purple-500 to-pink-600 gap-2",children:X?t.jsxs(t.Fragment,{children:[t.jsx(at,{className:"h-4 w-4 animate-spin"}),"Processing..."]}):t.jsxs(t.Fragment,{children:[t.jsx(Ze,{className:"h-4 w-4"}),"Apply Changes"]})}),t.jsxs("div",{className:"ml-auto flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsxs("span",{children:["Original: ",e.length," rows"]}),t.jsx("span",{children:""}),t.jsxs("span",{className:"text-purple-500 font-medium",children:["Processed: ",V.length," rows"]})]})]})]})]}),a.length===0&&!o&&t.jsx(ge,{className:"border-dashed border-2 border-muted-foreground/20",children:t.jsx(we,{className:"py-16 text-center",children:t.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[t.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-cyan-500/10 to-teal-500/10 inline-block",children:t.jsx(ks,{className:"h-12 w-12 text-cyan-600"})}),t.jsx("h3",{className:"text-xl font-semibold",children:"Generate Your Dashboard"}),t.jsx("p",{className:"text-muted-foreground",children:'Click "Generate Dashboard" to create a Power BI-style dashboard with AI-powered chart recommendations.'})]})})}),o&&t.jsx(ge,{children:t.jsxs(we,{className:"py-16 text-center",children:[t.jsx(at,{className:"h-16 w-16 animate-spin mx-auto text-cyan-500 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Analyzing your data..."}),t.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Creating optimal visualizations for ",r]})]})}),a.length>0&&!o&&t.jsx(Ba,{sensors:$,collisionDetection:Br,onDragStart:h=>p(String(h.active.id)),onDragEnd:k,children:t.jsx(Ja,{items:a.map(h=>h.id),strategy:Ns,children:t.jsx("div",{className:`grid gap-4 ${f==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"}`,children:a.map(h=>t.jsx(di,{tile:h,isSelected:P===h.id,onSelect:()=>O(h.id===P?null:h.id),viewMode:f,onResize:T,isDragging:g===h.id},h.id))})})}),t.jsx(Hn,{open:R,onOpenChange:U,children:t.jsxs(Kn,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[t.jsxs(Un,{children:[t.jsxs(Gn,{className:"flex items-center gap-2",children:[t.jsx(ls,{className:"h-5 w-5 text-cyan-500"}),"Choose Dashboard Template"]}),t.jsx(Wn,{children:"Select a template to generate a dashboard optimized for your use case"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:gi.map(h=>{const b=h.icon,z=(ne==null?void 0:ne.id)===h.id;return t.jsx(ge,{className:`cursor-pointer transition-all hover:shadow-lg hover:scale-[1.02] ${z?"ring-2 ring-cyan-500 bg-cyan-500/5":""}`,onClick:()=>ae(h),children:t.jsx(we,{className:"p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:`p-2.5 rounded-lg bg-gradient-to-br ${h.color} shadow-lg`,children:t.jsx(b,{className:"h-5 w-5 text-white"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[h.name,z&&t.jsx(Ze,{className:"h-4 w-4 text-cyan-500"})]}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:h.description}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[h.tileTypes.slice(0,5).map(C=>t.jsx(pe,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:C},C)),h.tileTypes.length>5&&t.jsxs(pe,{variant:"outline",className:"text-[10px] px-1.5 py-0",children:["+",h.tileTypes.length-5]})]})]})]})})},h.id)})}),t.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t",children:[t.jsx(me,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),t.jsxs(me,{onClick:()=>{U(!1),he(ne||void 0)},className:"bg-gradient-to-r from-cyan-500 to-teal-600",children:[t.jsx(as,{className:"h-4 w-4 mr-2"}),"Generate with ",(ne==null?void 0:ne.name)||"Default"]})]})]})})]})};export{Ti as default};
