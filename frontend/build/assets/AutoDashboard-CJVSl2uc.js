import{g as z,r as k,i as ee,j as e,a as g,b as I,an as E,c as L,f as d,S as C,x as se,B as m,L as B,d as v,C as S,t as q,F as te,P as ae,u as w,A as re}from"./index-CG6I4ibZ.js";import{C as ie}from"./checkbox-8Rr_ayCm.js";import{a as ne}from"./api-DYyoPUUI.js";import{C as R}from"./chart-line-DVZvcpV3.js";import{T as V}from"./target-BeagzYB1.js";import{E as le}from"./eye-BitIfH2z.js";import{G as ce}from"./grid-3x3-DS8h7Fvg.js";import{T as oe}from"./trending-up-Dqe0U41A.js";import"./index-DXJAGtlO.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=z("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=z("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]),Ne=({data:p,columns:h,columnTypes:D,datasetName:N,onDashboardCreate:P})=>{const[o,y]=k.useState([]),[f,T]=k.useState(!1),[l,$]=k.useState("desktop"),{exportToPdf:M}=ee(),t=h.filter(s=>D[s]==="numeric"),r=h.filter(s=>D[s]==="categorical"),O=()=>{const s=o.filter(a=>a.selected);M({title:"Auto Dashboard Report",subtitle:`AI-Generated Dashboard for ${N}`,datasetName:N,statistics:{"Total Records":p.length,"Selected Charts":s.length,"Numeric Columns":t.length,"Categorical Columns":r.length},insights:s.map(a=>({title:a.title,description:a.reason,importance:a.priority})),sections:[{title:"Dashboard Configuration",content:`This dashboard contains ${s.length} visualizations selected from ${o.length} AI-generated suggestions.`,type:"text"},{title:"Selected Visualizations",type:"list",content:s.map(a=>`${a.type.toUpperCase()}: ${a.title} - ${a.description}`)}],recommendations:["Customize chart colors to match your brand","Add filters for interactive data exploration","Consider adding drill-down capabilities for detailed analysis"]})},K=async()=>{var s;T(!0);try{const a=await ne.generateInsights(p.slice(0,500),h,N,["visualization","trends","key metrics"]),i=[];let u=[];if(a.success&&((s=a.data)!=null&&s.insights)){const n=a.data.insights;u=n.key_findings||n.recommendations||[]}if(t.slice(0,4).forEach((n,x)=>{const c=p.map(j=>Number(j[n])).filter(j=>!isNaN(j)),A=c.reduce((j,Z)=>j+Z,0),J=c.length>0?A/c.length:0,Q=Math.min(...c),W=Math.max(...c);i.push({id:`kpi-${n}`,type:"kpi",title:`${n} Overview`,description:`Average: ${J.toFixed(2)}, Range: ${Q.toFixed(0)} - ${W.toFixed(0)}`,yAxis:n,priority:x===0?"high":"medium",reason:u[x]||`${n} is a key performance indicator for tracking business metrics`,selected:x<2})}),r.length>0&&t.length>0&&i.push({id:`bar-${r[0]}-${t[0]}`,type:"bar",title:`${t[0]} by ${r[0]}`,description:`Compare ${t[0]} values across ${r[0]} categories`,xAxis:r[0],yAxis:t[0],priority:"high",reason:"Bar charts effectively compare values across categories, revealing distribution patterns",selected:!0}),r.length>0){const n=new Set(p.map(x=>String(x[r[0]])));n.size<=10&&i.push({id:`pie-${r[0]}`,type:"pie",title:`${r[0]} Distribution`,description:`Shows the proportional breakdown of ${r[0]} (${n.size} categories)`,xAxis:r[0],yAxis:r[0],priority:"medium",reason:"Pie charts are ideal for showing proportional distribution when categories are limited",selected:!0})}t.length>0&&(i.push({id:`line-${t[0]}`,type:"line",title:`${t[0]} Trend Analysis`,description:`Track changes and patterns in ${t[0]} over the dataset`,xAxis:h[0],yAxis:t[0],priority:"high",reason:"Line charts reveal trends, seasonality, and patterns over sequential data points",selected:!0}),t.length>1&&i.push({id:`area-${t[1]}`,type:"area",title:`${t[1]} Area Analysis`,description:`Visualize cumulative ${t[1]} with magnitude emphasis`,xAxis:h[0],yAxis:t[1],priority:"medium",reason:"Area charts combine trend visualization with magnitude representation",selected:!1})),t.length>=2&&i.push({id:`scatter-${t[0]}-${t[1]}`,type:"scatter",title:`${t[0]} vs ${t[1]} Correlation`,description:"Analyze relationship and correlation between these variables",xAxis:t[0],yAxis:t[1],priority:"medium",reason:"Scatter plots reveal correlations, clusters, and outliers between numeric variables",selected:!1}),y(i),w.success(`Generated ${i.length} AI-powered dashboard suggestions!`)}catch(a){console.error("Error generating suggestions:",a),U()}finally{T(!1)}},U=()=>{const s=[];t.slice(0,4).forEach((a,i)=>{const u=p.map(c=>Number(c[a])).filter(c=>!isNaN(c)),n=u.reduce((c,A)=>c+A,0),x=u.length>0?n/u.length:0;s.push({id:`kpi-${a}`,type:"kpi",title:`${a} Overview`,description:`Key metric showing ${a} with average ${x.toFixed(2)}`,yAxis:a,priority:i===0?"high":"medium",reason:`${a} is a key numeric metric that provides immediate insight`,selected:i<2})}),r.length>0&&t.length>0&&s.push({id:`bar-${r[0]}-${t[0]}`,type:"bar",title:`${t[0]} by ${r[0]}`,description:`Compare ${t[0]} values across ${r[0]} categories`,xAxis:r[0],yAxis:t[0],priority:"high",reason:"Bar charts are ideal for comparing values across categories",selected:!0}),r.length>0&&new Set(p.map(i=>String(i[r[0]]))).size<=10&&s.push({id:`pie-${r[0]}`,type:"pie",title:`${r[0]} Distribution`,description:`Shows the proportional breakdown of ${r[0]}`,xAxis:r[0],yAxis:r[0],priority:"medium",reason:"Pie charts effectively show proportional distribution",selected:!0}),t.length>0&&(s.push({id:`line-${t[0]}`,type:"line",title:`${t[0]} Trend`,description:`Track changes in ${t[0]} over the dataset`,xAxis:h[0],yAxis:t[0],priority:"high",reason:"Line charts reveal trends and patterns over sequences",selected:!0}),t.length>1&&s.push({id:`area-${t[1]}`,type:"area",title:`${t[1]} Area Analysis`,description:`Visualize cumulative ${t[1]} values`,xAxis:h[0],yAxis:t[1],priority:"medium",reason:"Area charts show magnitude and trends simultaneously",selected:!1})),t.length>=2&&s.push({id:`scatter-${t[0]}-${t[1]}`,type:"scatter",title:`${t[0]} vs ${t[1]}`,description:`Analyze correlation between ${t[0]} and ${t[1]}`,xAxis:t[0],yAxis:t[1],priority:"medium",reason:"Scatter plots reveal relationships between two numeric variables",selected:!1}),y(s),w.success(`Generated ${s.length} dashboard suggestions!`)},F=s=>{y(a=>a.map(i=>i.id===s?{...i,selected:!i.selected}:i))},H=()=>{y(s=>s.map(a=>({...a,selected:!0})))},X=()=>{y(s=>s.map(a=>({...a,selected:!1})))},b=o.filter(s=>s.selected).length,Y=()=>{const s=o.filter(a=>a.selected);if(s.length===0){w.error("Please select at least one chart");return}P&&P(s),w.success(`Dashboard created with ${s.length} charts!`)},G=s=>{switch(s){case"bar":return e.jsx(S,{className:"h-4 w-4"});case"line":return e.jsx(R,{className:"h-4 w-4"});case"pie":return e.jsx(q,{className:"h-4 w-4"});case"area":return e.jsx(oe,{className:"h-4 w-4"});case"scatter":return e.jsx(re,{className:"h-4 w-4"});case"kpi":return e.jsx(V,{className:"h-4 w-4"});default:return e.jsx(S,{className:"h-4 w-4"})}},_=s=>{switch(s){case"high":return"bg-red-500/10 text-red-500 border-red-500/30";case"medium":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30";case"low":return"bg-green-500/10 text-green-500 border-green-500/30";default:return""}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{className:"bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-primary/30",children:e.jsx(I,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg",children:e.jsx(E,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs(L,{className:"text-xl flex items-center gap-2",children:["Auto Dashboard Generator",e.jsxs(d,{variant:"secondary",className:"text-xs bg-blue-500/10 text-blue-500",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"AI-Powered"]})]}),e.jsx(se,{className:"mt-1",children:"One-click creation of mobile-responsive dashboards"})]})]}),e.jsx(m,{onClick:K,disabled:f,className:"bg-gradient-to-r from-primary to-blue-500",children:f?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Generate Suggestions"]})})]})})}),o.length===0&&!f&&e.jsx(g,{className:"border-dashed border-2 border-muted-foreground/20",children:e.jsx(v,{className:"py-16 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsx("div",{className:"p-4 rounded-full bg-muted inline-block",children:e.jsx(E,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold",children:"Generate Dashboard Suggestions"}),e.jsx("p",{className:"text-muted-foreground",children:'Click "Generate Suggestions" to get AI-powered chart recommendations for your dashboard.'}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mt-4",children:[e.jsxs(d,{variant:"outline",className:"text-xs",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Bar Charts"]}),e.jsxs(d,{variant:"outline",className:"text-xs",children:[e.jsx(R,{className:"h-3 w-3 mr-1"}),"Line Charts"]}),e.jsxs(d,{variant:"outline",className:"text-xs",children:[e.jsx(q,{className:"h-3 w-3 mr-1"}),"Pie Charts"]}),e.jsxs(d,{variant:"outline",className:"text-xs",children:[e.jsx(V,{className:"h-3 w-3 mr-1"}),"KPIs"]})]})]})})}),f&&e.jsx(g,{children:e.jsxs(v,{className:"py-12 text-center",children:[e.jsx(B,{className:"h-12 w-12 animate-spin mx-auto text-primary mb-4"}),e.jsx("h3",{className:"font-semibold",children:"Analyzing your data structure..."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Finding the best visualizations for ",N]})]})}),o.length>0&&!f&&e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx(v,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[b," of ",o.length," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:H,children:"Select All"}),e.jsx(m,{variant:"outline",size:"sm",onClick:X,children:"Clear"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-muted rounded-lg",children:[e.jsx(m,{variant:l==="desktop"?"default":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>$("desktop"),children:e.jsx(de,{className:"h-4 w-4"})}),e.jsx(m,{variant:l==="tablet"?"default":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>$("tablet"),children:e.jsx(he,{className:"h-4 w-4"})}),e.jsx(m,{variant:l==="mobile"?"default":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>$("mobile"),children:e.jsx(me,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",onClick:O,disabled:b===0,className:"gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Export PDF"]}),e.jsxs(m,{onClick:Y,disabled:b===0,className:"bg-gradient-to-r from-green-500 to-emerald-500",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Create Dashboard (",b,")"]})]})]})})}),e.jsx("div",{className:`grid gap-4 ${l==="desktop"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":l==="tablet"?"grid-cols-1 md:grid-cols-2":"grid-cols-1"}`,children:o.map(s=>e.jsx(g,{className:`cursor-pointer transition-all hover:shadow-lg ${s.selected?"ring-2 ring-primary border-primary":"hover:border-primary/50"}`,onClick:()=>F(s.id),children:e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.type==="kpi"?"bg-purple-500/10 text-purple-500":s.type==="bar"?"bg-blue-500/10 text-blue-500":s.type==="line"?"bg-green-500/10 text-green-500":s.type==="pie"?"bg-orange-500/10 text-orange-500":s.type==="area"?"bg-cyan-500/10 text-cyan-500":"bg-pink-500/10 text-pink-500"}`,children:G(s.type)}),e.jsx(d,{variant:"outline",className:`text-xs ${_(s.priority)}`,children:s.priority})]}),e.jsx(ie,{checked:s.selected,onCheckedChange:()=>F(s.id)})]}),e.jsx("h4",{className:"font-medium text-sm mb-1",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"p-2 rounded-lg bg-muted/30 text-xs text-muted-foreground",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"h-3 w-3 text-primary"}),s.reason]})}),s.xAxis&&s.yAxis&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(d,{variant:"secondary",className:"text-xs",children:["X: ",s.xAxis]}),e.jsxs(d,{variant:"secondary",className:"text-xs",children:["Y: ",s.yAxis]})]})]})},s.id))}),e.jsxs(g,{className:"bg-gradient-to-br from-muted/30 to-transparent",children:[e.jsx(I,{className:"pb-2",children:e.jsxs(L,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-primary"}),"Dashboard Preview",e.jsx(d,{variant:"outline",className:"text-xs capitalize",children:l})]})}),e.jsx(v,{children:e.jsx("div",{className:`bg-background rounded-lg border border-border/50 p-4 ${l==="desktop"?"min-h-[300px]":l==="tablet"?"max-w-2xl mx-auto min-h-[300px]":"max-w-sm mx-auto min-h-[400px]"}`,children:e.jsxs("div",{className:`grid gap-3 ${l==="desktop"?"grid-cols-4":l==="tablet"?"grid-cols-2":"grid-cols-1"}`,children:[o.filter(s=>s.selected).map((s,a)=>e.jsxs("div",{className:`bg-muted/30 rounded-lg p-3 flex flex-col items-center justify-center min-h-[80px] ${s.type==="kpi"?"":l==="desktop"?"col-span-2":""}`,children:[G(s.type),e.jsx("span",{className:"text-xs mt-1 text-center text-muted-foreground truncate w-full",children:s.title})]},s.id)),b===0&&e.jsxs("div",{className:"col-span-full text-center py-8 text-muted-foreground",children:[e.jsx(ce,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Select charts to preview dashboard layout"})]})]})})})]})]})]})};export{Ne as default};
