import{r as g,j as e,C as n,B as j,L as u,a as l,b as c,c as d,d as i,e as N,f,s as w,u as p}from"./index-CG6I4ibZ.js";import{T as v}from"./trending-up-Dqe0U41A.js";import{T as A}from"./target-BeagzYB1.js";const L=({dataset:m})=>{const[t,o]=g.useState(!1),[a,y]=g.useState(null),x=async()=>{o(!0);try{const s=m.cleanedData||m.rawData,{data:r,error:h}=await w.functions.invoke("data-agent",{body:{action:"analyze",data:s.slice(0,500),datasetName:m.name}});if(h)throw h;y(r),p.success("Analysis complete!")}catch(s){p.error(s instanceof Error?s.message:"Analysis failed")}finally{o(!1)}},b=s=>{switch(s.toLowerCase()){case"high":return"bg-red-500/20 text-red-400 border-red-500/30";case"medium":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";default:return"bg-blue-500/20 text-blue-400 border-blue-500/30"}};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(l,{className:"bg-card/50 border-border/50",children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(n,{className:"w-5 h-5 text-primary"}),"Analysis Summary"]})}),e.jsx(i,{children:e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.summary})})]}),a.insights&&a.insights.length>0&&e.jsxs(l,{className:"bg-card/50 border-border/50",children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-yellow-400"}),"Key Insights"]})}),e.jsx(i,{className:"space-y-4",children:a.insights.map((s,r)=>e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border border-border/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.title}),e.jsx(f,{className:b(s.importance),children:s.importance})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]},r))})]}),a.patterns&&a.patterns.length>0&&e.jsxs(l,{className:"bg-card/50 border-border/50",children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-primary"}),"Patterns Detected"]})}),e.jsx(i,{className:"space-y-3",children:a.patterns.map((s,r)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.description})]})]},r))})]}),a.recommendations&&a.recommendations.length>0&&e.jsxs(l,{className:"bg-card/50 border-border/50",children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-green-400"}),"Recommendations"]})}),e.jsx(i,{className:"space-y-4",children:a.recommendations.map((s,r)=>e.jsxs("div",{className:"p-4 bg-green-500/5 rounded-lg border border-green-500/20",children:[e.jsx("p",{className:"font-medium text-green-400 mb-1",children:s.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.reason})]},r))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(j,{variant:"outline",onClick:x,disabled:t,children:[t?e.jsx(u,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(n,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 space-y-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary to-cyan-400 flex items-center justify-center shadow-glow",children:e.jsx(n,{className:"w-10 h-10 text-primary-foreground"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to Analyze"}),e.jsx("p",{className:"text-muted-foreground max-w-md",children:"Let our AI agent analyze your data to discover patterns, generate insights, and provide recommendations."})]}),e.jsx(j,{size:"lg",onClick:x,disabled:t,className:"bg-gradient-to-r from-primary to-cyan-400 hover:opacity-90",children:t?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-5 h-5 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{className:"w-5 h-5 mr-2"}),"Start Analysis"]})})]})};export{L as default};
