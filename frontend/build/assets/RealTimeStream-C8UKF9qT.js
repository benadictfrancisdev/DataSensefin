import{g as X,r as t,u as m,j as e,a as x,b as R,ao as A,c as D,f as M,ap as Y,aq as Z,x as q,B as p,ar as H,d as j,Z as U,A as I}from"./index-CG6I4ibZ.js";import{S as J}from"./switch-buUSdwhU.js";import{S as Q}from"./slider-DR0xRu3K.js";import{R as _}from"./refresh-cw-asTtkkCL.js";import{C as ee}from"./clock-JgIc6NIT.js";import{a as se,A as te}from"./arrow-up-right-DsX3IAhq.js";import{R as ae,C as re,X as ne,Y as le,T as ie}from"./generateCategoricalChart-D2ZRUXeT.js";import{A as oe,a as ce}from"./AreaChart-CF92B7rz.js";import"./index-DXJAGtlO.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=X("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),we=({data:a,columns:T,columnTypes:z,datasetName:me})=>{const[i,h]=t.useState(!1),[v,w]=t.useState([]),[u,F]=t.useState(2e3),[f,L]=t.useState(!0),[r,S]=t.useState(""),[P,y]=t.useState([]),[n,C]=t.useState(0),o=t.useRef(null),g=T.filter(s=>z[s]==="numeric");t.useEffect(()=>{g.length>0&&!r&&S(g[0])},[g,r]);const k=t.useCallback(()=>{if(!r||a.length===0)return;const s=a.slice(0,n+1).map(d=>Number(d[r])).filter(d=>!isNaN(d));if(s.length===0)return;const l=s[s.length-1]||0,c=s[s.length-2]||l,O=s.reduce((d,V)=>d+V,0)/s.length,W=Math.max(...s),K=Math.min(...s),b=c!==0?(l-c)/c*100:0;y([{label:"Current Value",value:l,change:b,trend:b>0?"up":b<0?"down":"stable"},{label:"Average",value:O,change:0,trend:"stable"},{label:"Maximum",value:W,change:0,trend:"up"},{label:"Minimum",value:K,change:0,trend:"down"}])},[a,n,r]),N=t.useCallback(()=>{if(!r||n>=a.length){h(!1),m.info("Stream complete - end of data reached");return}const s=Number(a[n][r]);if(!isNaN(s)){const l={timestamp:new Date().toLocaleTimeString(),value:s,index:n};w(c=>[...c.slice(-50),l])}C(l=>l+1),k()},[a,n,r,k]);t.useEffect(()=>(i&&f?o.current=setInterval(N,u):o.current&&clearInterval(o.current),()=>{o.current&&clearInterval(o.current)}),[i,f,u,N]);const $=()=>{h(!0),m.success("Live streaming started")},E=()=>{h(!1),m.info("Stream paused")},G=()=>{h(!1),w([]),C(0),y([]),m.success("Stream reset")},B=()=>{N(),m.success("Data refreshed")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"bg-gradient-to-br from-violet-500/10 via-purple-500/5 to-transparent border-violet-500/30",children:e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 shadow-lg shadow-violet-500/25",children:e.jsx(A,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs(D,{className:"text-xl flex items-center gap-2",children:["Real-Time Data Stream",e.jsx(M,{variant:"outline",className:`text-xs ${i?"bg-green-500/10 text-green-500 border-green-500/30":"bg-muted text-muted-foreground"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-3 w-3 mr-1 animate-pulse"}),"Live"]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 mr-1"}),"Paused"]})})]}),e.jsx(q,{className:"mt-1",children:"Stream and monitor your data with auto-refresh capabilities"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i?e.jsxs(p,{variant:"outline",onClick:E,children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Pause"]}):e.jsxs(p,{onClick:$,className:"bg-gradient-to-r from-violet-500 to-purple-600",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Start Stream"]}),e.jsx(p,{variant:"outline",size:"icon",onClick:G,children:e.jsx(_,{className:"h-4 w-4"})})]})]})})}),e.jsx(x,{children:e.jsx(j,{className:"py-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Monitor:"}),e.jsx("select",{value:r,onChange:s=>S(s.target.value),className:"px-3 py-2 rounded-lg bg-muted border border-border text-sm",children:g.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-1 max-w-xs",children:[e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground whitespace-nowrap",children:[(u/1e3).toFixed(1),"s"]}),e.jsx(Q,{value:[u],onValueChange:([s])=>F(s),min:500,max:5e3,step:500,className:"flex-1"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{checked:f,onCheckedChange:L}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Auto-refresh"})]}),!f&&e.jsxs(p,{variant:"outline",size:"sm",onClick:B,children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Refresh Now"]})]})})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:P.map((s,l)=>e.jsxs(x,{className:"relative overflow-hidden",children:[e.jsxs(j,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.label}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:s.value.toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.jsx("div",{className:`p-2 rounded-full ${s.trend==="up"?"bg-green-500/10 text-green-500":s.trend==="down"?"bg-red-500/10 text-red-500":"bg-muted text-muted-foreground"}`,children:s.trend==="up"?e.jsx(se,{className:"h-5 w-5"}):s.trend==="down"?e.jsx(te,{className:"h-5 w-5"}):e.jsx(I,{className:"h-5 w-5"})})]}),s.change!==0&&e.jsxs("div",{className:`mt-2 text-xs ${s.change>0?"text-green-500":"text-red-500"}`,children:[s.change>0?"+":"",s.change.toFixed(2),"% from previous"]})]}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 h-1 ${s.trend==="up"?"bg-green-500":s.trend==="down"?"bg-red-500":"bg-primary"}`,style:{width:`${Math.min(n/a.length*100,100)}%`}})]},l))}),e.jsxs(x,{children:[e.jsx(R,{className:"pb-2",children:e.jsxs(D,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),"Live Data Feed",e.jsxs(M,{variant:"outline",className:"text-xs ml-auto",children:[v.length," points"]})]})}),e.jsx(j,{children:v.length===0?e.jsx("div",{className:"h-64 flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-4 opacity-30"}),e.jsx("p",{children:'Click "Start Stream" to begin monitoring'}),e.jsx("p",{className:"text-sm mt-1",children:"Data will appear here in real-time"})]})}):e.jsx("div",{className:"h-64",children:e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(oe,{data:v,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"streamGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(re,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.3}),e.jsx(ne,{dataKey:"timestamp",stroke:"hsl(var(--muted-foreground))",tick:{fontSize:10}}),e.jsx(le,{stroke:"hsl(var(--muted-foreground))",tick:{fontSize:10}}),e.jsx(ie,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),e.jsx(ce,{type:"monotone",dataKey:"value",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#streamGradient)",dot:!1,animationDuration:300})]})})})})]}),e.jsx(x,{className:"bg-muted/30",children:e.jsxs(j,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Stream Progress"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[n," / ",a.length," rows processed"]})]}),e.jsx("div",{className:"w-full h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-purple-600 transition-all duration-300",style:{width:`${n/a.length*100}%`}})})]})})]})};export{we as default};
